<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <title>–ú—É–ª—å—Ç–∏-–∫–Ω–æ–ø–∫–∞ —Å —Å–æ—Ü—Å–µ—Ç—è–º–∏ –∏ Jivo v2.0</title>
    
    <!-- Yandex.Metrika counter -->
    <script type="text/javascript">
        (function(m,e,t,r,i,k,a){
            m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};
            m[i].l=1*new Date();
            for (var j = 0; j < document.scripts.length; j++) {if (document.scripts[j].src === r) { return; }}
            k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)
        })(window, document,'script','https://mc.yandex.ru/metrika/tag.js?id=103841163', 'ym');

        ym(103841163, 'init', {ssr:true, webvisor:true, clickmap:true, ecommerce:"dataLayer", accurateTrackBounce:true, trackLinks:true});
    </script>
    <noscript><div><img src="https://mc.yandex.ru/watch/103841163" style="position:absolute; left:-9999px;" alt="" /></div></noscript>
    <!-- /Yandex.Metrika counter -->
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            line-height: 1.6;
            margin: 0;
            padding: 0;
        }
        
        .multibutton {
            position: fixed;
            bottom: 20px;
            right: 20px;
            z-index: 10000;
        }

        .main-button {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            border: none;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
            min-width: 50px;
            min-height: 50px;
        }

        .main-button:hover {
            transform: scale(1.1);
        }

        .main-button img {
            width: 30px;
            height: 30px;
            filter: brightness(0) invert(1);
        }
        
        .main-button .custom-icon {
            display: none;
        }

        .popup-menu {
            position: absolute;
            bottom: 70px;
            right: 0;
            display: none;
            flex-direction: column;
            align-items: center;
            gap: 10px;
        }

        .social-button {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            border: none;
            background: white;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.15);
            transition: all 0.3s ease;
            text-decoration: none;
        }

        .social-button:hover {
            transform: scale(1.15);
        }

        .social-button img {
            width: 25px;
            height: 25px;
        }

        .settings-panel {
            position: fixed;
            top: 20px;
            right: 20px;
            background: white;
            border-radius: 10px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            max-width: 400px;
            max-height: 85vh;
            display: none;
            z-index: 10010;
            cursor: move;
            user-select: none;
        }

        .settings-panel-header {
            position: sticky;
            top: 0;
            background: white;
            padding: 20px 20px 10px 20px;
            border-radius: 10px 10px 0 0;
            border-bottom: 1px solid #e0e0e0;
            z-index: 10011;
            cursor: move;
        }

        .settings-panel-content {
            max-height: calc(85vh - 80px);
            overflow-y: auto;
            padding: 10px 20px 20px 20px;
        }

        .settings-panel h3 {
            margin-top: 0;
            color: #333;
        }

        .settings-section {
            margin-bottom: 25px;
            padding: 15px;
            border: 1px solid #e0e0e0;
            border-radius: 8px;
            background: #f9f9f9;
        }

        .settings-section h4 {
            margin-top: 0;
            color: #333;
            border-bottom: 2px solid #667eea;
            padding-bottom: 8px;
        }

        .mode-selector {
            margin-bottom: 20px;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 8px;
            border: 1px solid #e9ecef;
        }

        .mode-selector h4 {
            margin: 0 0 10px 0;
            color: #333;
            font-size: 14px;
            font-weight: 600;
            border-bottom: none;
            padding-bottom: 0;
        }

        .mode-selector label {
            display: block;
            margin-bottom: 8px;
            font-size: 14px;
            cursor: pointer;
        }

        .mode-selector input[type="radio"] {
            margin-right: 8px;
        }

        .jivo-widgets-settings {
            display: none;
        }

        .social-input {
            margin-bottom: 15px;
            border: 1px solid #e0e0e0;
            border-radius: 8px;
            padding: 15px;
            background: white;
        }

        .social-input-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        .social-input-title {
            font-weight: bold;
            color: #555;
            margin: 0;
        }

        .social-input-actions {
            display: flex;
            gap: 5px;
            align-items: center;
        }

        .move-button {
            background: #6c757d;
            color: white;
            border: none;
            border-radius: 3px;
            width: 24px;
            height: 24px;
            cursor: pointer;
            font-size: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }

        .move-button:hover:not(:disabled) {
            background: #5a6268;
            transform: scale(1.05);
        }

        .move-button:disabled {
            background: #e9ecef;
            color: #adb5bd;
            cursor: not-allowed;
        }

        .remove-button {
            background: #ff4757;
            color: white;
            border: none;
            border-radius: 50%;
            width: 24px;
            height: 24px;
            cursor: pointer;
            font-size: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }

        .remove-button:hover {
            background: #ff3742;
            transform: scale(1.1);
        }

        .social-input label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
            color: #555;
        }

        .social-input input {
            width: 100%;
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 5px;
            box-sizing: border-box;
            margin-bottom: 8px;
        }

        .jivo-input {
            margin-bottom: 15px;
        }

        .jivo-input label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
            color: #555;
        }

        .jivo-input textarea {
            width: 100%;
            height: 80px;
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 5px;
            box-sizing: border-box;
            font-family: monospace;
            font-size: 12px;
            resize: vertical;
        }

        .jivo-toggle {
            display: flex;
            align-items: center;
            margin-bottom: 15px;
        }

        .jivo-toggle input[type="checkbox"] {
            margin-right: 10px;
            transform: scale(1.2);
        }

        .jivo-toggle label {
            font-weight: bold;
            color: #555;
            cursor: pointer;
        }

        .settings-toggle {
            position: fixed;
            top: 20px;
            left: 20px;
            z-index: 10030;
            font-size: 1.2rem;
            padding: 12px 24px;
            width: 220px;
            height: 50px;
            background: linear-gradient(90deg, #667eea 0%, #764ba2 100%);
            color: #fff;
            border: none;
            border-radius: 16px;
            box-shadow: 0 6px 24px rgba(102,126,234,0.18);
            font-weight: bold;
            cursor: pointer;
            transition: background 0.2s, box-shadow 0.2s, transform 0.1s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }
        .settings-toggle:hover {
            background: linear-gradient(90deg, #764ba2 0%, #667eea 100%);
            box-shadow: 0 10px 32px rgba(102,126,234,0.28);
            transform: scale(1.04);
        }

        .donate-button {
            position: fixed;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            z-index: 10030;
            font-size: 1.2rem;
            padding: 12px 24px;
            width: 250px;
            height: 50px;
            background: linear-gradient(90deg, #667eea 0%, #764ba2 100%);
            color: #fff;
            border: none;
            border-radius: 16px;
            box-shadow: 0 6px 24px rgba(102,126,234,0.18);
            font-weight: bold;
            cursor: pointer;
            transition: background 0.2s, box-shadow 0.2s, transform 0.1s;
            text-decoration: none;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            white-space: nowrap;
        }

        .donate-button:hover {
            background: linear-gradient(90deg, #764ba2 0%, #667eea 100%);
            box-shadow: 0 10px 32px rgba(102,126,234,0.28);
            transform: translateX(-50%) scale(1.04);
        }

        .demo-content {
            min-height: 100vh;
            background: transparent;
            padding: 40px 20px;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        .demo-container {
            max-width: 1200px;
            margin: 0 auto;
        }

        .demo-header {
            text-align: center;
            margin-bottom: 60px;
        }

        .demo-header h1 {
            font-size: 3.5rem;
            margin-bottom: 20px;
            color: white;
            text-shadow: 0 4px 20px rgba(0,0,0,0.3);
        }

        .demo-header p {
            font-size: 1.3rem;
            color: rgba(255, 255, 255, 0.9);
            margin-bottom: 10px;
        }

        .demo-instructions {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 40px;
        }

        .demo-instructions h2 {
            color: #333;
            margin-bottom: 20px;
            font-size: 2rem;
        }

        .demo-instructions ol {
            color: #555;
            font-size: 1.1rem;
            line-height: 1.8;
        }

        .demo-instructions li {
            margin-bottom: 15px;
        }

        .demo-instructions strong {
            color: #333;
        }

        .demo-features {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
            margin-bottom: 40px;
        }

        .demo-feature {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 15px;
            padding: 30px;
            text-align: center;
            transition: transform 0.3s ease;
        }

        .demo-feature:hover {
            transform: translateY(-5px);
        }

        .demo-feature h3 {
            color: #333;
            margin-bottom: 15px;
            font-size: 1.5rem;
        }

        .demo-feature p {
            color: #666;
            line-height: 1.6;
        }

        /* –°—Ç–∏–ª–∏ –¥–ª—è –±–ª–æ–∫–∞ —Å –∏–∫–æ–Ω–∫–∞–º–∏ */
        .icons-section {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 20px;
            padding: 40px;
            margin-bottom: 40px;
        }

        .icons-section h2 {
            color: #333;
            margin-bottom: 20px;
            text-align: center;
            font-size: 2.5rem;
        }

        .icons-section > p {
            color: #666;
            text-align: center;
            margin-bottom: 30px;
            font-size: 1.2rem;
        }

        .icons-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .icon-item {
            display: flex;
            align-items: center;
            padding: 15px;
            border: 2px solid #e9ecef;
            border-radius: 10px;
            transition: all 0.3s ease;
            background: #ffffff;
        }

        .icon-item:hover {
            border-color: #667eea;
            background: #f8f9ff;
            transform: translateY(-2px);
        }

        .icon-item img {
            width: 40px;
            height: 40px;
            margin-right: 15px;
            border-radius: 8px;
        }

        .icon-info {
            flex: 1;
        }

        .icon-info strong {
            display: block;
            color: #333;
            margin-bottom: 5px;
            font-size: 14px;
        }

        .icon-info code {
            display: block;
            background: #e9ecef;
            padding: 8px 10px;
            border-radius: 5px;
            font-size: 11px;
            color: #333;
            word-break: break-all;
            font-family: 'Courier New', monospace;
        }

        .icons-note {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            padding: 20px;
            border-radius: 8px;
            margin-top: 30px;
        }

        .icons-note p {
            margin: 0 0 15px 0;
            color: #333;
            font-weight: 500;
        }

        .icons-note ul {
            margin: 0;
            padding-left: 20px;
            color: #555;
        }

        .icons-note li {
            margin-bottom: 8px;
            line-height: 1.4;
        }

        @media (max-width: 768px) {
            .icons-grid {
                grid-template-columns: 1fr;
            }
            
            .icon-item {
                flex-direction: column;
                text-align: center;
            }
            
            .icon-item img {
                margin-right: 0;
                margin-bottom: 10px;
            }
        }

        .code-output {
            margin-top: 20px;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 8px;
            border: 1px solid #dee2e6;
            display: none;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
            max-width: 100%;
            overflow: hidden;
            height: auto;
            max-height: none;
        }

        .code-output h4 {
            margin: 0 0 15px 0;
            color: #333;
            font-size: 16px;
        }

        #settingsInfo {
            max-width: 100%;
            overflow-x: auto;
            overflow-y: hidden;
            padding: 0 0 15px 0;
            margin: 0;
            height: auto;
            max-height: none;
        }

        #readyCodeTextarea {
            width: 100%;
            min-height: 200px;
            max-height: none;
            padding: 15px;
            border: 1px solid #e0e0e0;
            border-radius: 6px;
            font-family: 'Courier New', monospace;
            font-size: 13px;
            line-height: 1.5;
            resize: vertical;
            background: #fff;
            color: #333;
            margin: 0 0 10px 0;
            white-space: pre;
            overflow-x: auto;
            word-wrap: normal;
            -webkit-overflow-scrolling: touch;
        }

        .copy-button {
            margin-top: 10px;
            padding: 8px 15px;
            background: #28a745;
            color: white;
            border: none;
            border-radius: 3px;
            cursor: pointer;
        }

        .copy-button:hover {
            background: #218838;
        }

        .add-button {
            width: 100%;
            min-height: 48px;
            padding: 12px 24px;
            background: #28a745;
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            font-size: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0;
            transition: all 0.3s ease;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .add-button:hover {
            background: #218838;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(40,167,69,0.3);
        }
        
        .add-button.custom-button {
            background: #ff6b35;
        }
        
        .add-button.custom-button:hover {
            background: #e55a2b;
            box-shadow: 0 4px 8px rgba(255,107,53,0.3);
        }

        .button-actions {
            display: flex;
            gap: 15px;
            margin: 20px 0;
            width: 100%;
        }

        .settings-hint {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            border-radius: 8px;
            padding: 12px;
            margin-bottom: 15px;
            color: #856404;
        }

        .settings-hint p {
            margin: 0;
            font-size: 14px;
        }

        .social-input.newly-added {
            border: 2px solid #28a745;
            background: #f8fff9;
            animation: highlightNew 2s ease-in-out;
        }

        @keyframes highlightNew {
            0% { transform: scale(1); }
            50% { transform: scale(1.02); }
            100% { transform: scale(1); }
        }

        .button-actions button {
            flex: 1;
            min-height: 48px;
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            font-size: 16px;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .apply-button {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .apply-button:hover {
            background: linear-gradient(135deg, #764ba2 0%, #667eea 100%);
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(102,126,234,0.3);
        }

        .clear-button {
            background: #6c757d;
            color: white;
        }

        .clear-button:hover {
            background: #5a6268;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(108,117,125,0.3);
        }

        .preview-section {
            margin-top: 20px;
            padding: 15px;
            background: #e8f4fd;
            border-radius: 8px;
            border-left: 4px solid #667eea;
        }

        .preview-section h4 {
            margin-top: 0;
            color: #333;
        }

        .preview-code {
            background: #f8f9fa;
            padding: 10px;
            border-radius: 5px;
            font-family: monospace;
            font-size: 11px;
            white-space: pre-wrap;
            max-height: 150px;
            overflow-y: auto;
        }

        /* –°—Ç–∏–ª–∏ –¥–ª—è —Å–∫—Ä—ã—Ç–∏—è —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–π –∫–Ω–æ–ø–∫–∏ Jivo */
        .hidden {
            display: none;
        }

        /* –°—Ç–∏–ª–∏ –¥–ª—è –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ –≤—ã–±–æ—Ä–∞ —Å–æ—Ü—Å–µ—Ç–µ–π */
        .social-selector-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 10020;
        }

        .social-selector-content {
            background: white;
            border-radius: 15px;
            padding: 30px;
            max-width: 600px;
            max-height: 80vh;
            overflow-y: auto;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        }

        .social-selector-header {
            text-align: center;
            margin-bottom: 25px;
        }

        .social-selector-header h3 {
            margin: 0;
            color: #333;
            font-size: 24px;
        }

        .social-selector-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
            gap: 15px;
            margin-bottom: 25px;
        }

        .social-option {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 15px;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
        }

        .social-option:hover {
            border-color: #667eea;
            background: #f8f9ff;
            transform: translateY(-2px);
        }

        .social-option img {
            width: 32px;
            height: 32px;
            margin-bottom: 8px;
        }

        .social-option span {
            font-size: 12px;
            color: #555;
            font-weight: 500;
        }

        .social-selector-actions {
            display: flex;
            justify-content: center;
            gap: 15px;
        }

        .social-selector-btn {
            padding: 12px 25px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s ease;
        }

        .social-selector-cancel {
            background: #6c757d;
            color: white;
        }

        .social-selector-cancel:hover {
            background: #5a6268;
        }

        /* –°—Ç–∏–ª–∏ –¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π */
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            background: #28a745;
            color: white;
            padding: 15px 20px;
            border-radius: 8px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
            z-index: 10002;
            transform: translateX(400px);
            transition: transform 0.3s ease;
            max-width: 300px;
        }

        .notification.show {
            transform: translateX(0);
        }

        .notification.success {
            background: #28a745;
        }

        .notification.info {
            background: #17a2b8;
        }

        .notification.warning {
            background: #ffc107;
            color: #212529;
        }
    </style>
</head>
<body>

<script>
// –§—É–Ω–∫—Ü–∏—è –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è –ø–∞–Ω–µ–ª–∏ –Ω–∞—Å—Ç—Ä–æ–µ–∫ (–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∞ –∑–∞—Ä–∞–Ω–µ–µ)
function toggleSettings() {
    console.log('toggleSettings –≤—ã–∑–≤–∞–Ω–∞');
    const panel = document.getElementById('settingsPanel');
    if (!panel) {
        console.error('–ü–∞–Ω–µ–ª—å –Ω–∞—Å—Ç—Ä–æ–µ–∫ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞!');
        return;
    }
    
    console.log('–ü–∞–Ω–µ–ª—å –Ω–∞–π–¥–µ–Ω–∞:', panel);
    console.log('–¢–µ–∫—É—â–∏–π display:', panel.style.display);
    
    if (panel.style.display === 'none' || panel.style.display === '') {
        console.log('–û—Ç–∫—Ä—ã–≤–∞–µ–º –ø–∞–Ω–µ–ª—å');
        panel.style.display = 'block';
        // –í—ã–∑—ã–≤–∞–µ–º renderSocialInputs –µ—Å–ª–∏ —Ñ—É–Ω–∫—Ü–∏—è —É–∂–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∞
        if (typeof renderSocialInputs === 'function') {
            renderSocialInputs();
        }
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ –ø–∞–Ω–µ–ª–∏ –µ—Å–ª–∏ —Ñ—É–Ω–∫—Ü–∏—è —É–∂–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∞
        if (typeof initPanelDragging === 'function') {
            setTimeout(initPanelDragging, 100);
        }
    } else {
        console.log('–ó–∞–∫—Ä—ã–≤–∞–µ–º –ø–∞–Ω–µ–ª—å');
        panel.style.display = 'none';
        // –°–∫—Ä—ã–≤–∞–µ–º –ø–æ–¥—Å–∫–∞–∑–∫—É –ø—Ä–∏ –∑–∞–∫—Ä—ã—Ç–∏–∏ –ø–∞–Ω–µ–ª–∏
        const hint = document.getElementById('settingsHint');
        if (hint) {
            hint.style.display = 'none';
        }
    }
}

// –§—É–Ω–∫—Ü–∏—è –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è —Ä–µ–∂–∏–º–æ–≤ —Ä–∞–±–æ—Ç—ã (–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∞ –∑–∞—Ä–∞–Ω–µ–µ)
function toggleMode() {
    console.log('toggleMode –≤—ã–∑–≤–∞–Ω–∞');
    const modeInput = document.querySelector('input[name="mode"]:checked');
    if (!modeInput) {
        console.log('–ü–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å —Ä–µ–∂–∏–º–æ–≤ –Ω–µ –Ω–∞–π–¥–µ–Ω');
        return;
    }
    
    const mode = modeInput.value;
    window.currentMode = mode; // –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤ –≥–ª–æ–±–∞–ª—å–Ω–æ–π –æ–±–ª–∞—Å—Ç–∏ –≤–∏–¥–∏–º–æ—Å—Ç–∏
    console.log('–†–µ–∂–∏–º –∏–∑–º–µ–Ω–µ–Ω –Ω–∞:', mode);
    
    // –ù–∞—Ö–æ–¥–∏–º —Å–µ–∫—Ü–∏–∏ –ø–æ –∏—Ö —Å–æ–¥–µ—Ä–∂–∏–º–æ–º—É
    const socialSection = Array.from(document.querySelectorAll('.settings-section')).find(section => 
        section.querySelector('h4') && section.querySelector('h4').textContent.includes('–°–æ—Ü–∏–∞–ª—å–Ω—ã–µ –∫–Ω–æ–ø–∫–∏')
    );
    const jivoChatSection = Array.from(document.querySelectorAll('.settings-section')).find(section => 
        section.querySelector('h4') && section.querySelector('h4').textContent.includes('Jivo —á–∞—Ç')
    );
    const jivoWidgetsSection = document.querySelector('.jivo-widgets-settings');
    
    console.log('–ù–∞–π–¥–µ–Ω–Ω—ã–µ —Å–µ–∫—Ü–∏–∏:', { 
        socialSection: !!socialSection, 
        jivoChatSection: !!jivoChatSection, 
        jivoWidgetsSection: !!jivoWidgetsSection 
    });
    
    if (mode === 'social') {
        console.log('–ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Ä–µ–∂–∏–º —Å–æ—Ü–∏–∞–ª—å–Ω—ã—Ö —Å–µ—Ç–µ–π');
        if (socialSection) {
            socialSection.style.display = 'block';
            console.log('–°–æ—Ü–∏–∞–ª—å–Ω–∞—è —Å–µ–∫—Ü–∏—è –ø–æ–∫–∞–∑–∞–Ω–∞');
        }
        if (jivoChatSection) {
            jivoChatSection.style.display = 'block';
            console.log('Jivo —á–∞—Ç —Å–µ–∫—Ü–∏—è –ø–æ–∫–∞–∑–∞–Ω–∞');
        }
        if (jivoWidgetsSection) {
            jivoWidgetsSection.style.display = 'none';
            console.log('Jivo –≤–∏–¥–∂–µ—Ç—ã —Å–µ–∫—Ü–∏—è —Å–∫—Ä—ã—Ç–∞');
        }
    } else if (mode === 'jivo') {
        console.log('–ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Ä–µ–∂–∏–º Jivo –≤–∏–¥–∂–µ—Ç–æ–≤');
        if (socialSection) {
            socialSection.style.display = 'none';
            console.log('–°–æ—Ü–∏–∞–ª—å–Ω–∞—è —Å–µ–∫—Ü–∏—è —Å–∫—Ä—ã—Ç–∞');
        }
        if (jivoChatSection) {
            jivoChatSection.style.display = 'none';
            console.log('Jivo —á–∞—Ç —Å–µ–∫—Ü–∏—è —Å–∫—Ä—ã—Ç–∞');
        }
        if (jivoWidgetsSection) {
            jivoWidgetsSection.style.display = 'block';
            console.log('Jivo –≤–∏–¥–∂–µ—Ç—ã —Å–µ–∫—Ü–∏—è –ø–æ–∫–∞–∑–∞–Ω–∞');
        } else {
            console.error('–°–µ–∫—Ü–∏—è Jivo –≤–∏–¥–∂–µ—Ç–æ–≤ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞!');
        }
    }
}

// –§—É–Ω–∫—Ü–∏—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è Jivo –≤–∏–¥–∂–µ—Ç–∞ (–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∞ –∑–∞—Ä–∞–Ω–µ–µ)
function addJivoWidget() {
    const container = document.getElementById('jivoWidgetsContainer');
    if (!container) return; // –ï—Å–ª–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –µ—â–µ –Ω–µ —Å–æ–∑–¥–∞–Ω
    
    const widgetId = 'jivo_widget_' + Date.now();
    
    const widgetConfig = document.createElement('div');
    widgetConfig.className = 'social-input';
    widgetConfig.innerHTML = 
        '<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px;">' +
            '<h5 style="margin: 0;">Jivo –≤–∏–¥–∂–µ—Ç ' + (window.jivoWidgets ? window.jivoWidgets.length + 1 : 1) + '</h5>' +
            '<button onclick="removeJivoWidget(\'' + widgetId + '\')" style="background: #dc3545; color: white; border: none; padding: 5px 10px; border-radius: 3px; cursor: pointer; font-size: 12px;">√ó</button>' +
        '</div>' +
        '<div style="margin-bottom: 10px;">' +
            '<label>–ù–∞–∑–≤–∞–Ω–∏–µ –∫–Ω–æ–ø–∫–∏:</label>' +
            '<input type="text" id="jivo_widget_name_' + widgetId + '" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –ü—Ä–æ–¥–∞–∂–∏" style="width: 100%; padding: 8px; margin-top: 5px; border: 1px solid #ddd; border-radius: 4px; box-sizing: border-box;">' +
        '</div>' +
        '<div style="margin-bottom: 10px;">' +
            '<label>–¶–≤–µ—Ç —Ñ–æ–Ω–∞ –∫–Ω–æ–ø–∫–∏:</label>' +
            '<input type="color" id="jivo_widget_color_' + widgetId + '" value="#ffffff" style="width: 100%; padding: 8px; margin-top: 5px; border: 1px solid #ddd; border-radius: 4px; box-sizing: border-box; height: 40px;">' +
        '</div>' +
        '<div>' +
            '<label>–ö–æ–¥ –≤–∏–¥–∂–µ—Ç–∞ Jivo:</label>' +
            '<textarea id="jivo_widget_code_' + widgetId + '" placeholder="&lt;script src=&quot;//code.jivo.ru/widget/Yd1IbyauyY&quot; async&gt;&lt;/script&gt;" style="width: 100%; padding: 8px; margin-top: 5px; border: 1px solid #ddd; border-radius: 4px; box-sizing: border-box; height: 60px; font-family: monospace; font-size: 12px;"></textarea>' +
        '</div>';
    
    container.appendChild(widgetConfig);
    
    // –î–æ–±–∞–≤–ª—è–µ–º –≤ –≥–ª–æ–±–∞–ª—å–Ω—ã–π –º–∞—Å—Å–∏–≤ –µ—Å–ª–∏ –æ–Ω —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
    if (window.jivoWidgets) {
        window.jivoWidgets.push(widgetId);
    }
}

// –§—É–Ω–∫—Ü–∏—è —É–¥–∞–ª–µ–Ω–∏—è Jivo –≤–∏–¥–∂–µ—Ç–∞ (–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∞ –∑–∞—Ä–∞–Ω–µ–µ)
function removeJivoWidget(widgetId) {
    const widgetElement = document.getElementById('jivo_widget_name_' + widgetId)?.closest('.social-input');
    if (widgetElement) {
        widgetElement.remove();
    }
    
    // –£–¥–∞–ª—è–µ–º –∏–∑ –≥–ª–æ–±–∞–ª—å–Ω–æ–≥–æ –º–∞—Å—Å–∏–≤–∞ –µ—Å–ª–∏ –æ–Ω —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
    if (window.jivoWidgets) {
        const index = window.jivoWidgets.indexOf(widgetId);
        if (index > -1) {
            window.jivoWidgets.splice(index, 1);
        }
    }
}

// –§—É–Ω–∫—Ü–∏—è –∑–∞–∫—Ä—ã—Ç–∏—è –ø–∞–Ω–µ–ª–∏ –Ω–∞—Å—Ç—Ä–æ–µ–∫ (–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∞ –∑–∞—Ä–∞–Ω–µ–µ)
function closeSettingsPanel() {
    const panel = document.getElementById('settingsPanel');
    if (panel) {
        panel.style.display = 'none';
    }
}

// –§—É–Ω–∫—Ü–∏—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Å–æ—Ü–∏–∞–ª—å–Ω–æ–π –∫–Ω–æ–ø–∫–∏ (–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∞ –∑–∞—Ä–∞–Ω–µ–µ)
function addSocialInput() {
    // –£–±–µ–∂–¥–∞–µ–º—Å—è, —á—Ç–æ –ø–∞–Ω–µ–ª—å –Ω–∞—Å—Ç—Ä–æ–µ–∫ –æ—Ç–∫—Ä—ã—Ç–∞
    const panel = document.getElementById('settingsPanel');
    if (panel) {
        panel.style.display = 'block';
    }
    
    // –í—ã–∑—ã–≤–∞–µ–º showSocialSelector –µ—Å–ª–∏ —Ñ—É–Ω–∫—Ü–∏—è —É–∂–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∞
    if (typeof showSocialSelector === 'function') {
        showSocialSelector();
    }
}

// –§—É–Ω–∫—Ü–∏—è —Å–æ–∑–¥–∞–Ω–∏—è —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ–π –∫–Ω–æ–ø–∫–∏ (–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∞ –∑–∞—Ä–∞–Ω–µ–µ)
function addCustomSocialInput() {
    // –£–±–µ–∂–¥–∞–µ–º—Å—è, —á—Ç–æ –ø–∞–Ω–µ–ª—å –Ω–∞—Å—Ç—Ä–æ–µ–∫ –æ—Ç–∫—Ä—ã—Ç–∞
    const panel = document.getElementById('settingsPanel');
    if (panel) {
        panel.style.display = 'block';
    }
    
    // –í—ã–∑—ã–≤–∞–µ–º —Ñ—É–Ω–∫—Ü–∏—é –µ—Å–ª–∏ –æ–Ω–∞ —É–∂–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∞
    if (typeof addCustomSocialInputMain === 'function') {
        addCustomSocialInputMain();
    }
}

// –§—É–Ω–∫—Ü–∏—è —É–¥–∞–ª–µ–Ω–∏—è –∏–∫–æ–Ω–∫–∏ Jivo (–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∞ –∑–∞—Ä–∞–Ω–µ–µ)
function removeJivoIcon() {
    const iconInput = document.getElementById('jivoIcon');
    if (iconInput) {
        iconInput.value = '';
    }
}

// –§—É–Ω–∫—Ü–∏—è —É–¥–∞–ª–µ–Ω–∏—è –≥–ª–∞–≤–Ω–æ–π –∏–∫–æ–Ω–∫–∏ (–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∞ –∑–∞—Ä–∞–Ω–µ–µ)
function removeMainIcon() {
    const iconInput = document.getElementById('mainIcon');
    if (iconInput) {
        iconInput.value = '';
    }
}

// –§—É–Ω–∫—Ü–∏—è —É–¥–∞–ª–µ–Ω–∏—è –≥–ª–∞–≤–Ω–æ–≥–æ —Ü–≤–µ—Ç–∞ (–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∞ –∑–∞—Ä–∞–Ω–µ–µ)
function removeMainColor() {
    const colorInput = document.getElementById('mainColor');
    if (colorInput) {
        colorInput.value = '';
    }
}

// –§—É–Ω–∫—Ü–∏—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–∫ (–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∞ –∑–∞—Ä–∞–Ω–µ–µ)
function applySettings() {
    if (typeof applySettingsMain === 'function') {
        applySettingsMain();
    }
}

// –§—É–Ω–∫—Ü–∏—è –æ—á–∏—Å—Ç–∫–∏ –≤—Å–µ—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫ (–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∞ –∑–∞—Ä–∞–Ω–µ–µ)
function clearAllSettings() {
    if (typeof clearAllSettingsMain === 'function') {
        clearAllSettingsMain();
    }
}

// –§—É–Ω–∫—Ü–∏—è –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–∫ (–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∞ –∑–∞—Ä–∞–Ω–µ–µ)
function copySettings() {
    if (typeof copySettingsMain === 'function') {
        copySettingsMain();
    }
}

// –§—É–Ω–∫—Ü–∏—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∫–ª–∏–∫–∞ –ø–æ –≥–ª–∞–≤–Ω–æ–π –∫–Ω–æ–ø–∫–µ (–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∞ –∑–∞—Ä–∞–Ω–µ–µ)
function handleMainButtonClick() {
    if (typeof handleMainButtonClickMain === 'function') {
        handleMainButtonClickMain();
    }
}

// –§—É–Ω–∫—Ü–∏—è —Å–∫—Ä—ã—Ç–∏—è —Å–µ–ª–µ–∫—Ç–æ—Ä–∞ —Å–æ—Ü–∏–∞–ª—å–Ω—ã—Ö —Å–µ—Ç–µ–π (–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∞ –∑–∞—Ä–∞–Ω–µ–µ)
function hideSocialSelector() {
    if (typeof hideSocialSelectorMain === 'function') {
        hideSocialSelectorMain();
    }
}

// –§—É–Ω–∫—Ü–∏—è –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏—è –∫–Ω–æ–ø–∫–∏ –≤–≤–µ—Ä—Ö (–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∞ –∑–∞—Ä–∞–Ω–µ–µ)
function moveSocialUp(index) {
    if (typeof moveSocialUpMain === 'function') {
        moveSocialUpMain(index);
    }
}

// –§—É–Ω–∫—Ü–∏—è –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏—è –∫–Ω–æ–ø–∫–∏ –≤–Ω–∏–∑ (–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∞ –∑–∞—Ä–∞–Ω–µ–µ)
function moveSocialDown(index) {
    if (typeof moveSocialDownMain === 'function') {
        moveSocialDownMain(index);
    }
}

// –§—É–Ω–∫—Ü–∏—è —É–¥–∞–ª–µ–Ω–∏—è –∫–Ω–æ–ø–∫–∏ (–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∞ –∑–∞—Ä–∞–Ω–µ–µ)
function removeSocialInput(id) {
    if (typeof removeSocialInputMain === 'function') {
        removeSocialInputMain(id);
    }
}

// –§—É–Ω–∫—Ü–∏—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ç–∏–ø–∞ –≥–ª–∞–≤–Ω–æ–π –∏–∫–æ–Ω–∫–∏ (–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∞ –∑–∞—Ä–∞–Ω–µ–µ)
function handleMainIconChange() {
    if (typeof handleMainIconChangeMain === 'function') {
        handleMainIconChangeMain();
    }
}
</script>

<button class="settings-toggle" onclick="toggleSettings()">‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏</button>

<div class="settings-panel" id="settingsPanel">
    <div class="settings-panel-header" id="settingsPanelHeader">
        <div style="display: flex; justify-content: space-between; align-items: center;">
            <h3 style="margin: 0;">–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –º—É–ª—å—Ç–∏-–∫–Ω–æ–ø–∫–∏</h3>
            <button onclick="closeSettingsPanel()" style="background: none; border: none; font-size: 24px; cursor: pointer; color: #666; padding: 0; width: 30px; height: 30px; display: flex; align-items: center; justify-content: center;">√ó</button>
        </div>
    </div>
    <div class="settings-panel-content">
    
    <!-- –ü–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å —Ä–µ–∂–∏–º–æ–≤ -->
    <div class="mode-selector">
        <h4>–†–µ–∂–∏–º —Ä–∞–±–æ—Ç—ã:</h4>
        <label><input type="radio" name="mode" value="social" checked onchange="toggleMode()"> –°–æ—Ü–∏–∞–ª—å–Ω—ã–µ —Å–µ—Ç–∏</label>
        <label><input type="radio" name="mode" value="jivo" onchange="toggleMode()"> Jivo –≤–∏–¥–∂–µ—Ç—ã</label>
    </div>
    
    <!-- –°–µ–∫—Ü–∏—è —Å–æ—Ü–∏–∞–ª—å–Ω—ã—Ö –∫–Ω–æ–ø–æ–∫ -->
    <div class="settings-section">
        <h4>üì± –°–æ—Ü–∏–∞–ª—å–Ω—ã–µ –∫–Ω–æ–ø–∫–∏</h4>
        <div id="socialInputs">
            <!-- –°–æ—Ü–∏–∞–ª—å–Ω—ã–µ –∫–Ω–æ–ø–∫–∏ –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª—è—Ç—å—Å—è —Å—é–¥–∞ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
        </div>
        <div style="display: flex; gap: 10px; margin-bottom: 15px;">
            <button class="add-button" onclick="addSocialInput()" style="width: 50%; margin-bottom: 0;">‚ûï –î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—É—é –∫–Ω–æ–ø–∫—É</button>
            <button class="add-button custom-button" onclick="addCustomSocialInput()" style="width: 50%; margin-bottom: 0;">üé® –°–æ–∑–¥–∞—Ç—å —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—É—é –∫–Ω–æ–ø–∫—É</button>
        </div>
    </div>
    
    <!-- –°–µ–∫—Ü–∏—è Jivo —á–∞—Ç–∞ -->
    <div class="settings-section">
        <h4>üí¨ Jivo —á–∞—Ç</h4>
        <div class="jivo-toggle">
            <input type="checkbox" id="jivoEnabled" onchange="toggleJivoSection()">
            <label for="jivoEnabled">–í–∫–ª—é—á–∏—Ç—å Jivo —á–∞—Ç</label>
        </div>
        <div class="jivo-toggle" style="margin-top: 10px;">
            <input type="checkbox" id="jivoChatMode" onchange="handleJivoChatModeChange()">
            <label for="jivoChatMode">–ì–ª–∞–≤–Ω–∞—è –∫–Ω–æ–ø–∫–∞ = –∫–Ω–æ–ø–∫–∞ —á–∞—Ç–∞ (–±–µ–∑ —Å–æ—Ü—Å–µ—Ç–µ–π)</label>
        </div>
        <div id="jivoIconSection" style="display: none; margin-top: 15px;">
            <div class="jivo-icon-input">
                <label>üé® –°—Å—ã–ª–∫–∞ –Ω–∞ —Å–≤–æ—é –∏–∫–æ–Ω–∫—É:</label>
                <input type="url" id="jivoIconUrl" placeholder="https://example.com/icon.png" onchange="handleJivoIconUrl()" style="width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 4px; margin-top: 5px;">
                <div class="jivo-icon-preview" id="jivoIconPreview" style="display: none; margin-top: 10px;">
                    <img id="jivoIconPreviewImg" alt="–ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–π –ø—Ä–æ—Å–º–æ—Ç—Ä" style="max-width: 50px; max-height: 50px; border: 1px solid #ddd; border-radius: 4px;">
                    <button type="button" onclick="removeJivoIcon()" style="margin-left: 10px; padding: 5px 10px; background: #dc3545; color: white; border: none; border-radius: 3px; cursor: pointer;">‚ùå –£–±—Ä–∞—Ç—å</button>
                </div>
            </div>
        </div>
        <div id="jivoCodeSection" style="display: none; margin-top: 15px;">
            <div class="jivo-code-input">
                <label>üìù –ö–æ–¥ –≤–∏–¥–∂–µ—Ç–∞ Jivo:</label>
                <textarea id="jivoCode" placeholder='&lt;script src="//code.jivo.ru/widget/–í–ê–®_–ö–û–î" async&gt;&lt;/script&gt;' style="width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 4px; margin-top: 5px; height: 60px; font-family: monospace; font-size: 12px;"></textarea>
            </div>
        </div>
    </div>
    
    <!-- –°–µ–∫—Ü–∏—è Jivo –≤–∏–¥–∂–µ—Ç–æ–≤ -->
    <div class="settings-section jivo-widgets-settings">
        <h4>üîß Jivo –≤–∏–¥–∂–µ—Ç—ã</h4>
        <p style="font-size: 12px; color: #666; margin-bottom: 15px;">
            –î–æ–±–∞–≤—å—Ç–µ –∫–Ω–æ–ø–∫–∏ —Å Jivo –≤–∏–¥–∂–µ—Ç–∞–º–∏. –ö–∞–∂–¥–∞—è –∫–Ω–æ–ø–∫–∞ –±—É–¥–µ—Ç –∑–∞–≥—Ä—É–∂–∞—Ç—å —Å–≤–æ–π —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –≤–∏–¥–∂–µ—Ç.
        </p>
        
        <div id="jivoWidgetsContainer">
            <!-- Jivo –≤–∏–¥–∂–µ—Ç—ã –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª—è—Ç—å—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
        </div>
        
        <button class="add-button" onclick="addJivoWidget()" style="width: 100%; margin-top: 10px;">+ –î–æ–±–∞–≤–∏—Ç—å Jivo –≤–∏–¥–∂–µ—Ç</button>
    </div>
    
    <!-- –°–µ–∫—Ü–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–∫ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è -->
    <div class="settings-section">
        <h4>üéõÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è</h4>
        <div class="display-settings">
            <div style="margin-bottom: 15px;">
                <label style="font-weight: bold; display: block; margin-bottom: 8px;">–°–ø–æ—Å–æ–± –æ—Ç–∫—Ä—ã—Ç–∏—è –º–µ–Ω—é:</label>
                <div style="margin-left: 10px;">
                    <input type="radio" id="openMethodClick" name="openMethod" value="click" checked onchange="handleOpenMethodChange()">
                    <label for="openMethodClick">–ü–æ –∫–ª–∏–∫—É –Ω–∞ –≥–ª–∞–≤–Ω—É—é –∫–Ω–æ–ø–∫—É (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)</label>
                </div>
                <div style="margin-left: 10px;">
                    <input type="radio" id="openMethodAlways" name="openMethod" value="always" onchange="handleOpenMethodChange()">
                    <label for="openMethodAlways">–í—Å–µ–≥–¥–∞ –≤–∏–¥–∏–º–æ–µ –º–µ–Ω—é (–±–µ–∑ –∫–ª–∏–∫–∞)</label>
                </div>
            </div>
            
            <div>
                <label style="font-weight: bold; display: block; margin-bottom: 8px;">–û—Ä–∏–µ–Ω—Ç–∞—Ü–∏—è –º–µ–Ω—é:</label>
                <div style="margin-left: 10px;">
                    <input type="radio" id="menuOrientationVertical" name="menuOrientation" value="vertical" checked onchange="handleMenuOrientationChange()">
                    <label for="menuOrientationVertical">–í–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–æ–µ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)</label>
                </div>
                <div style="margin-left: 10px;">
                    <input type="radio" id="menuOrientationHorizontal" name="menuOrientation" value="horizontal" onchange="handleMenuOrientationChange()">
                    <label for="menuOrientationHorizontal">–ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–µ</label>
                </div>
            </div>
        </div>
    </div>
    
    <!-- –°–µ–∫—Ü–∏—è –≥–ª–∞–≤–Ω–æ–π –∏–∫–æ–Ω–∫–∏ -->
    <div class="settings-section">
        <h4>üéØ –ì–ª–∞–≤–Ω–∞—è –∫–Ω–æ–ø–∫–∞</h4>
        <div class="main-icon-input">
            <label>–í—ã–±–µ—Ä–∏—Ç–µ –∏–∫–æ–Ω–∫—É –¥–ª—è –≥–ª–∞–≤–Ω–æ–π –∫–Ω–æ–ø–∫–∏:</label>
            <div style="margin-top: 10px;">
                <input type="radio" id="defaultIcon" name="mainIcon" value="default" checked onchange="handleMainIconChange()">
                <label for="defaultIcon">–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é (–∫–∞—Ä–∞–Ω–¥–∞—à)</label>
            </div>
            <div style="margin-top: 5px;">
                <input type="radio" id="customMainIcon" name="mainIcon" value="custom" onchange="handleMainIconChange()">
                <label for="customMainIcon">–°–≤–æ—è –∏–∫–æ–Ω–∫–∞</label>
            </div>
            <div id="customMainIconSection" style="display: none; margin-top: 10px;">
                <input type="url" id="mainIconUrl" placeholder="https://example.com/icon.png" onchange="handleMainIconUrl()" style="width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 4px;">
                <div class="main-icon-preview" id="mainIconPreview" style="display: none; margin-top: 10px;">
                    <img id="mainIconPreviewImg" alt="–ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–π –ø—Ä–æ—Å–º–æ—Ç—Ä" style="max-width: 50px; max-height: 50px; border: 1px solid #ddd; border-radius: 4px;">
                    <button type="button" onclick="removeMainIcon()" style="margin-left: 10px; padding: 5px 10px; background: #dc3545; color: white; border: none; border-radius: 3px; cursor: pointer;">‚ùå –£–±—Ä–∞—Ç—å</button>
                </div>
            </div>
        </div>
        
        <div class="main-color-input" style="margin-top: 20px;">
            <label>üé® –¶–≤–µ—Ç –∫–Ω–æ–ø–∫–∏:</label>
            <div style="margin-top: 10px;">
                <input type="radio" id="defaultColor" name="mainColor" value="default" checked onchange="handleMainColorChange()">
                <label for="defaultColor">–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é (—Ñ–∏–æ–ª–µ—Ç–æ–≤—ã–π –≥—Ä–∞–¥–∏–µ–Ω—Ç)</label>
            </div>
            <div style="margin-top: 5px;">
                <input type="radio" id="customMainColor" name="mainColor" value="custom" onchange="handleMainColorChange()">
                <label for="customMainColor">–°–≤–æ–π —Ü–≤–µ—Ç</label>
            </div>
            <div id="customMainColorSection" style="display: none; margin-top: 10px;">
                <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 10px;">
                    <div style="position: relative;">
                        <input type="color" id="mainColorPicker" value="#667eea" onchange="handleMainColorPicker()" style="width: 60px; height: 50px; border: 2px solid #ddd; border-radius: 8px; cursor: pointer; padding: 0;">
                        <div style="position: absolute; top: -5px; right: -5px; background: #fff; border: 1px solid #ddd; border-radius: 50%; width: 20px; height: 20px; display: flex; align-items: center; justify-content: center; font-size: 10px; color: #666;">üé®</div>
                    </div>
                    <div style="flex: 1;">
                        <input type="text" id="mainColorCode" placeholder="#667eea" onchange="handleMainColorCode()" style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 6px; font-family: monospace; font-size: 14px;">
                        <div style="font-size: 11px; color: #666; margin-top: 2px;">HEX –∫–æ–¥ —Ü–≤–µ—Ç–∞</div>
                    </div>
                    <div id="mainColorPreviewBox" style="width: 50px; height: 50px; border-radius: 50%; border: 3px solid #ddd; box-shadow: 0 2px 8px rgba(0,0,0,0.1);"></div>
                </div>
                <div style="display: flex; gap: 10px; align-items: center;">
                    <button type="button" onclick="removeMainColor()" style="padding: 8px 15px; background: #dc3545; color: white; border: none; border-radius: 5px; cursor: pointer; font-size: 12px;">‚ùå –£–±—Ä–∞—Ç—å —Ü–≤–µ—Ç</button>
                    <div id="colorInfo" style="font-size: 11px; color: #666; font-family: monospace;"></div>
                </div>
            </div>
        </div>
        
        <div class="main-shape-input" style="margin-top: 20px;">
            <label>üî≤ –§–æ—Ä–º–∞ –∫–Ω–æ–ø–∫–∏:</label>
            <div style="margin-top: 10px;">
                <input type="radio" id="defaultShape" name="mainShape" value="default" checked onchange="handleMainShapeChange()">
                <label for="defaultShape">–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é (–∫—Ä—É–≥–ª–∞—è)</label>
            </div>
            <div style="margin-top: 5px;">
                <input type="radio" id="customSizeShape" name="mainShape" value="customSize" onchange="handleMainShapeChange()">
                <label for="customSizeShape">–°–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π —Ä–∞–∑–º–µ—Ä</label>
            </div>
            <div id="customSizeSection" style="display: none; margin-top: 10px;">
                <div style="background: #f8f9fa; padding: 10px; border-radius: 5px; border-left: 3px solid #28a745;">
                    <p style="margin: 0 0 10px 0; font-size: 12px; color: #666;">
                        <strong>üìè –£–∫–∞–∂–∏—Ç–µ —Ä–∞–∑–º–µ—Ä—ã –∫–Ω–æ–ø–∫–∏ –≤ –ø–∏–∫—Å–µ–ª—è—Ö:</strong>
                    </p>
                    <div style="display: flex; gap: 10px; align-items: center;">
                        <div>
                            <label for="customWidth" style="font-size: 12px; color: #666;">–®–∏—Ä–∏–Ω–∞:</label>
                            <input type="number" id="customWidth" value="120" min="30" max="500" onchange="updateMainButtonShape()" style="width: 60px; padding: 5px; border: 1px solid #ddd; border-radius: 3px; font-size: 12px;">
                        </div>
                        <div>
                            <label for="customHeight" style="font-size: 12px; color: #666;">–í—ã—Å–æ—Ç–∞:</label>
                            <input type="number" id="customHeight" value="60" min="30" max="500" onchange="updateMainButtonShape()" style="width: 60px; padding: 5px; border: 1px solid #ddd; border-radius: 3px; font-size: 12px;">
                        </div>
                        <div>
                            <label for="customBorderRadius" style="font-size: 12px; color: #666;">–°–∫—Ä—É–≥–ª–µ–Ω–∏–µ:</label>
                            <input type="number" id="customBorderRadius" value="8" min="0" max="50" onchange="updateMainButtonShape()" style="width: 60px; padding: 5px; border: 1px solid #ddd; border-radius: 3px; font-size: 12px;">
                        </div>
                    </div>
                    <p style="margin: 10px 0 0 0; font-size: 11px; color: #888;">
                        üí° –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ —Ä–∞–∑–º–µ—Ä—ã –¥–ª—è –ª–æ–≥–æ—Ç–∏–ø–æ–≤: —à–∏—Ä–∏–Ω–∞ 120-200px, –≤—ã—Å–æ—Ç–∞ 50-80px
                    </p>
                </div>
            </div>
        </div>
    </div>
    
    <div class="button-actions">
        <button class="apply-button" onclick="applySettings()">–ü—Ä–∏–º–µ–Ω–∏—Ç—å</button>
        <button class="clear-button" onclick="clearAllSettings()">–û—á–∏—Å—Ç–∏—Ç—å –≤—Å–µ</button>
    </div>
    
    <div class="settings-hint" id="settingsHint" style="display: none;">
        <p>üí° <strong>–ù–µ –∑–∞–±—É–¥—å—Ç–µ –Ω–∞–∂–∞—Ç—å "–ü—Ä–∏–º–µ–Ω–∏—Ç—å"</strong> –ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–∫!</p>
    </div>
    
    <div class="code-output" id="codeOutput">
        <h4>–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–∏–º–µ–Ω–µ–Ω—ã:</h4>
        <div id="settingsInfo" style="background: #e9ecef; padding: 10px; border-radius: 3px; font-family: monospace; font-size: 12px;"></div>
        <button class="copy-button" onclick="copySettings()">üìã –ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏</button>
    </div>
    </div>
</div>

<!-- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è –º—É–ª—å—Ç–∏-–∫–Ω–æ–ø–∫–∏ -->
<div class="multibutton">
    <button class="main-button" onclick="handleMainButtonClick()">
        <img src="https://cdn-icons-png.flaticon.com/512/1827/1827933.png" alt="–ú–µ–Ω—é" class="default-icon">
        <img src="" alt="–ö–∞—Å—Ç–æ–º–Ω–∞—è –∏–∫–æ–Ω–∫–∞" class="custom-icon" style="display: none;">
    </button>
    <div class="popup-menu" id="popupMenu">
        <!-- –¢–µ—Å—Ç–æ–≤—ã–µ –∫–Ω–æ–ø–∫–∏ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é -->
        <a href="https://t.me/username" class="social-button" target="_blank" title="Telegram">
            <img src="https://cdn-icons-png.flaticon.com/512/2111/2111646.png" alt="Telegram">
        </a>
        <a href="https://wa.me/1234567890" class="social-button" target="_blank" title="WhatsApp">
            <img src="https://cdn-icons-png.flaticon.com/512/733/733585.png" alt="WhatsApp">
        </a>
        <a href="https://vk.com/username" class="social-button" target="_blank" title="VK">
            <img src="https://cdn-icons-png.flaticon.com/512/145/145813.png" alt="VK">
        </a>
    </div>
</div>

<!-- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è Jivo –≤–∏–¥–∂–µ—Ç–∞ -->
<div id="jivoContainer"></div>

<!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –≤—ã–±–æ—Ä–∞ —Å–æ—Ü—Å–µ—Ç–µ–π -->
<div class="social-selector-modal" id="socialSelectorModal">
    <div class="social-selector-content">
        <div class="social-selector-header">
            <h3>üì± –í—ã–±–µ—Ä–∏—Ç–µ —Å–æ—Ü–∏–∞–ª—å–Ω—É—é —Å–µ—Ç—å</h3>
        </div>
        <div class="social-selector-grid" id="socialSelectorGrid">
            <!-- –û–ø—Ü–∏–∏ —Å–æ—Ü—Å–µ—Ç–µ–π –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
        </div>
        <div class="social-selector-actions">
            <button class="social-selector-btn social-selector-cancel" onclick="hideSocialSelector()">–û—Ç–º–µ–Ω–∞</button>
        </div>
    </div>
</div>

<!-- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π -->
<div id="notificationContainer"></div>

<div class="demo-content">
    <div class="demo-container">
        <div class="demo-header">
            <h1>üöÄ –ú—É–ª—å—Ç–∏-–∫–Ω–æ–ø–∫–∞ —Å —Å–æ—Ü—Å–µ—Ç—è–º–∏</h1>
            <p>–ö—Ä–∞—Å–∏–≤–∞—è –∏ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–∞—è –∫–Ω–æ–ø–∫–∞ –¥–ª—è –≤–∞—à–µ–≥–æ —Å–∞–π—Ç–∞</p>
            <p>–ù–∞—Å—Ç—Ä–æ–π—Ç–µ —Å—Å—ã–ª–∫–∏ –Ω–∞ —Å–æ—Ü–∏–∞–ª—å–Ω—ã–µ —Å–µ—Ç–∏ –∏ Jivo —á–∞—Ç</p>
        </div>

        <div class="demo-instructions">
            <h2>üìã –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å</h2>
            <ol>
                <li><strong>–ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É "‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏"</strong> –≤ –ª–µ–≤–æ–º –≤–µ—Ä—Ö–Ω–µ–º —É–≥–ª—É</li>
                <li><strong>–î–æ–±–∞–≤—å—Ç–µ —Å–æ—Ü–∏–∞–ª—å–Ω—ã–µ —Å–µ—Ç–∏</strong> —á–µ—Ä–µ–∑ —Å–µ–ª–µ–∫—Ç–æ—Ä –∏–ª–∏ –≤—Ä—É—á–Ω—É—é</li>
                <li><strong>–ù–∞—Å—Ç—Ä–æ–π—Ç–µ —Å—Å—ã–ª–∫–∏</strong> –Ω–∞ –≤–∞—à–∏ –ø—Ä–æ—Ñ–∏–ª–∏</li>
                <li><strong>–ù–∞–∂–º–∏—Ç–µ "–ü—Ä–∏–º–µ–Ω–∏—Ç—å"</strong> –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–∫</li>
                <li><strong>–ö–ª–∏–∫–Ω–∏—Ç–µ –Ω–∞ —Ñ–∏–æ–ª–µ—Ç–æ–≤—É—é –∫–Ω–æ–ø–∫—É</strong> –≤ –ø—Ä–∞–≤–æ–º –Ω–∏–∂–Ω–µ–º —É–≥–ª—É –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è</li>
                <li><strong>–°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∫–æ–¥</strong> –∏ –≤—Å—Ç–∞–≤—å—Ç–µ –Ω–∞ –≤–∞—à —Å–∞–π—Ç –ø–µ—Ä–µ–¥ —Ç–µ–≥–æ–º <code>&lt;/body&gt;</code></li>
                <li><strong>‚ö†Ô∏è –í–∞–∂–Ω–æ:</strong> –ü—Ä–∏ –≤—Å—Ç–∞–≤–∫–µ –∫–æ–¥–∞ –Ω–∞ —Å–∞–π—Ç <strong>—É–±–µ—Ä–∏—Ç–µ –≤—Å–µ –∑–Ω–∞–∫–∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤</strong> (<code>&lt;!--</code> –∏ <code>--&gt;</code>)</li>
            </ol>
        </div>

        <div class="demo-features">
            <div class="demo-feature">
                <h3>üé® –ö—Ä–∞—Å–∏–≤—ã–π –¥–∏–∑–∞–π–Ω</h3>
                <p>–°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π –≥—Ä–∞–¥–∏–µ–Ω—Ç–Ω—ã–π –¥–∏–∑–∞–π–Ω —Å –ø–ª–∞–≤–Ω—ã–º–∏ –∞–Ω–∏–º–∞—Ü–∏—è–º–∏ –∏ —ç—Ñ—Ñ–µ–∫—Ç–∞–º–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏—è</p>
            </div>
            
            <div class="demo-feature">
                <h3>‚öôÔ∏è –ü—Ä–æ—Å—Ç–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞</h3>
                <p>–£–¥–æ–±–Ω–∞—è –ø–∞–Ω–µ–ª—å –Ω–∞—Å—Ç—Ä–æ–µ–∫ –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å—Å—ã–ª–æ–∫ –∏ –∏–∫–æ–Ω–æ–∫</p>
            </div>
            
            <div class="demo-feature">
                <h3>üì± –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å</h3>
                <p>–û—Ç–ª–∏—á–Ω–æ –≤—ã–≥–ª—è–¥–∏—Ç –Ω–∞ –≤—Å–µ—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö - –æ—Ç –º–æ–±–∏–ª—å–Ω—ã—Ö –¥–æ –¥–µ—Å–∫—Ç–æ–ø–æ–≤</p>
            </div>
            
            <div class="demo-feature">
                <h3>üöÄ –ë—ã—Å—Ç—Ä–∞—è —Ä–∞–±–æ—Ç–∞</h3>
                <p>–õ–µ–≥–∫–∏–π –∫–æ–¥ –±–µ–∑ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π, –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –º–≥–Ω–æ–≤–µ–Ω–Ω–æ</p>
            </div>

            <div class="demo-feature">
                <h3>üí¨ Jivo –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è</h3>
                <p>–í—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ —á–∞—Ç-–≤–∏–¥–∂–µ—Ç–∞ —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º —Å–∫—Ä—ã—Ç–∏–µ–º —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–π –∫–Ω–æ–ø–∫–∏</p>
            </div>

            <div class="demo-feature">
                <h3>üîß –ì–∏–±–∫–æ—Å—Ç—å</h3>
                <p>–ü–æ–¥–¥–µ—Ä–∂–∫–∞ 20+ –ø–æ–ø—É–ª—è—Ä–Ω—ã—Ö –ø–ª–∞—Ç—Ñ–æ—Ä–º —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –∫–∞—Å—Ç–æ–º–Ω—ã—Ö</p>
            </div>
        </div>

        <div class="icons-section">
            <h2>üì± –ü–æ–ø—É–ª—è—Ä–Ω—ã–µ –∏–∫–æ–Ω–∫–∏ –¥–ª—è —Å–æ—Ü—Å–µ—Ç–µ–π</h2>
            <p>–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —ç—Ç–∏ —Å—Å—ã–ª–∫–∏ –Ω–∞ –∏–∫–æ–Ω–∫–∏ –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö –º—É–ª—å—Ç–∏-–∫–Ω–æ–ø–∫–∏:</p>
            
            <div class="icons-grid">
                <div class="icon-item">
                    <img src="https://cdn-icons-png.flaticon.com/512/2111/2111646.png" alt="Telegram">
                    <div class="icon-info">
                        <strong>Telegram</strong>
                        <code>https://cdn-icons-png.flaticon.com/512/2111/2111646.png</code>
                    </div>
                </div>
                
                <div class="icon-item">
                    <img src="https://cdn-icons-png.flaticon.com/512/733/733585.png" alt="WhatsApp">
                    <div class="icon-info">
                        <strong>WhatsApp</strong>
                        <code>https://cdn-icons-png.flaticon.com/512/733/733585.png</code>
                    </div>
                </div>
                
                <div class="icon-item">
                    <img src="https://cdn-icons-png.flaticon.com/512/145/145813.png" alt="VK">
                    <div class="icon-info">
                        <strong>VK</strong>
                        <code>https://cdn-icons-png.flaticon.com/512/145/145813.png</code>
                    </div>
                </div>
                
                <div class="icon-item">
                    <img src="https://cdn-icons-png.flaticon.com/512/2111/2111463.png" alt="Instagram">
                    <div class="icon-info">
                        <strong>Instagram</strong>
                        <code>https://cdn-icons-png.flaticon.com/512/2111/2111463.png</code>
                    </div>
                </div>
                
                <div class="icon-item">
                    <img src="https://cdn-icons-png.flaticon.com/512/2111/2111392.png" alt="Facebook">
                    <div class="icon-info">
                        <strong>Facebook</strong>
                        <code>https://cdn-icons-png.flaticon.com/512/2111/2111392.png</code>
                    </div>
                </div>
                
                <div class="icon-item">
                    <img src="https://cdn-icons-png.flaticon.com/512/2111/2111738.png" alt="Twitter">
                    <div class="icon-info">
                        <strong>Twitter</strong>
                        <code>https://cdn-icons-png.flaticon.com/512/2111/2111738.png</code>
                    </div>
                </div>
                
                <div class="icon-item">
                    <img src="https://cdn-icons-png.flaticon.com/512/3670/3670147.png" alt="YouTube">
                    <div class="icon-info">
                        <strong>YouTube</strong>
                        <code>https://cdn-icons-png.flaticon.com/512/3670/3670147.png</code>
                    </div>
                </div>
                
                <div class="icon-item">
                    <img src="https://cdn-icons-png.flaticon.com/512/889/889125.png" alt="–û–¥–Ω–æ–∫–ª–∞—Å—Å–Ω–∏–∫–∏">
                    <div class="icon-info">
                        <strong>–û–¥–Ω–æ–∫–ª–∞—Å—Å–Ω–∏–∫–∏</strong>
                        <code>https://cdn-icons-png.flaticon.com/512/889/889125.png</code>
                    </div>
                </div>
                
                <div class="icon-item">
                    <img src="https://cdn-icons-png.flaticon.com/512/561/561127.png" alt="–ò–º–µ–π–ª">
                    <div class="icon-info">
                        <strong>–ò–º–µ–π–ª</strong>
                        <code>https://cdn-icons-png.flaticon.com/512/561/561127.png</code>
                    </div>
                </div>
            </div>
            
            <div class="icons-note">
                <p><strong>üí° –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:</strong></p>
                <ol>
                    <li>–û—Ç–∫—Ä–æ–π—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –º—É–ª—å—Ç–∏-–∫–Ω–æ–ø–∫–∏</li>
                    <li>–í –ø–æ–ª–µ "URL –∏–∫–æ–Ω–∫–∏" –≤—Å—Ç–∞–≤—å—Ç–µ –ª—é–±—É—é —Å—Å—ã–ª–∫—É –∏–∑ —Å–ø–∏—Å–∫–∞ –≤—ã—à–µ</li>
                    <li>–ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–µ–ª–µ–∫—Ç–æ—Ä –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –Ω–æ–≤–æ–π –∫–Ω–æ–ø–∫–∏</li>
                    <li>–ù–∞–∂–º–∏—Ç–µ "–ü—Ä–∏–º–µ–Ω–∏—Ç—å" –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–∫</li>
                </ol>
            </div>
        </div>

        <div class="icons-section">
            <h2>üîß –ü–æ–ª–µ–∑–Ω—ã–µ –∏–∫–æ–Ω–∫–∏</h2>
            <p>–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∏–∫–æ–Ω–∫–∏ –¥–ª—è —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π:</p>
            
            <div class="icons-grid">
                <div class="icon-item">
                    <img src="https://cdn-icons-png.flaticon.com/512/2702/2702154.png" alt="–ë–∞–∑–∞ –∑–Ω–∞–Ω–∏–π">
                    <div class="icon-info">
                        <strong>–ë–∞–∑–∞ –∑–Ω–∞–Ω–∏–π</strong>
                        <code>https://cdn-icons-png.flaticon.com/512/2702/2702154.png</code>
                    </div>
                </div>
                
                <div class="icon-item">
                    <img src="https://cdn-icons-png.flaticon.com/512/2190/2190552.png" alt="–ß–∞—Ç 1">
                    <div class="icon-info">
                        <strong>–ß–∞—Ç 1</strong>
                        <code>https://cdn-icons-png.flaticon.com/512/2190/2190552.png</code>
                    </div>
                </div>
                
                <div class="icon-item">
                    <img src="https://cdn-icons-png.flaticon.com/512/209/209989.png" alt="–ß–∞—Ç 2">
                    <div class="icon-info">
                        <strong>–ß–∞—Ç 2</strong>
                        <code>https://cdn-icons-png.flaticon.com/512/209/209989.png</code>
                    </div>
                </div>
                
                <div class="icon-item">
                    <img src="https://cdn-icons-png.flaticon.com/512/8377/8377198.png" alt="–ß–∞—Ç 3">
                    <div class="icon-info">
                        <strong>–ß–∞—Ç 3</strong>
                        <code>https://cdn-icons-png.flaticon.com/512/8377/8377198.png</code>
                    </div>
                </div>
                
                <div class="icon-item">
                    <img src="https://cdn-icons-png.flaticon.com/512/8794/8794966.png" alt="–ß–∞—Ç 4">
                    <div class="icon-info">
                        <strong>–ß–∞—Ç 4</strong>
                        <code>https://cdn-icons-png.flaticon.com/512/8794/8794966.png</code>
                    </div>
                </div>
            </div>
            
            <div class="icons-note">
                <p><strong>üí° –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ:</strong></p>
                <ul>
                    <li><strong>–ë–∞–∑–∞ –∑–Ω–∞–Ω–∏–π</strong> - –¥–ª—è —Å—Å—ã–ª–æ–∫ –Ω–∞ FAQ, –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é, —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∏</li>
                    <li><strong>–ß–∞—Ç –∏–∫–æ–Ω–∫–∏</strong> - –¥–ª—è —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —á–∞—Ç-—Å–∏—Å—Ç–µ–º, –ø–æ–¥–¥–µ—Ä–∂–∫–∏, –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–π</li>
                    <li>–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ "–°–æ–∑–¥–∞—Ç—å —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—É—é –∫–Ω–æ–ø–∫—É" –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —ç—Ç–∏—Ö –∏–∫–æ–Ω–æ–∫</li>
                </ul>
            </div>
        </div>
    </div>
</div>

<script>
// –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
// currentMode —Ç–µ–ø–µ—Ä—å —É–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ window.currentMode –≤ —Ñ—É–Ω–∫—Ü–∏–∏ toggleMode
window.jivoWidgets = [];
let loadedJivoScripts = new Set();

let socialSettings = [
    { id: 'telegram', name: 'Telegram', link: 'https://t.me/username', icon: 'https://cdn-icons-png.flaticon.com/512/2111/2111646.png' },
    { id: 'whatsapp', name: 'WhatsApp', link: 'https://wa.me/1234567890', icon: 'https://cdn-icons-png.flaticon.com/512/733/733585.png' },
    { id: 'vk', name: 'VK', link: 'https://vk.com/username', icon: 'https://cdn-icons-png.flaticon.com/512/145/145813.png' }
];

let jivoSettings = {
    enabled: false,
    customIcon: null,
    code: '',
    chatMode: false
};

let displaySettings = {
    openMethod: 'click', // 'click' –∏–ª–∏ 'always'
    menuOrientation: 'vertical' // 'vertical' –∏–ª–∏ 'horizontal'
};

let mainIconSettings = {
    type: 'default', // 'default' –∏–ª–∏ 'custom'
    customUrl: null,
    colorType: 'default', // 'default' –∏–ª–∏ 'custom'
    customColor: '#667eea',
    shapeType: 'default', // 'default', 'custom' –∏–ª–∏ 'customSize'
    customWidth: 120,
    customHeight: 60,
    customBorderRadius: 8
};

let nextId = 1;

// Jivo –∫–æ–ª–ª–±—ç–∫–∏
function jivo_onLoadCallback() {
    // –°–∫—Ä—ã–≤–∞–µ–º —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—É—é –∫–Ω–æ–ø–∫—É Jivo
    const jivo_custom_widget = true;
}

function jivo_onOpen() {
    // –°–∫—Ä—ã–≤–∞–µ–º –∫–∞—Å—Ç–æ–º–Ω—É—é –∫–Ω–æ–ø–∫—É –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ —á–∞—Ç–∞
    document.querySelector('.multibutton').style.display = 'none';
}

function jivo_onClose() {
    // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∫–∞—Å—Ç–æ–º–Ω—É—é –∫–Ω–æ–ø–∫—É –ø—Ä–∏ –∑–∞–∫—Ä—ã—Ç–∏–∏ —á–∞—Ç–∞
    document.querySelector('.multibutton').style.display = 'block';
}

// –§—É–Ω–∫—Ü–∏—è –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è –ø–∞–Ω–µ–ª–∏ –Ω–∞—Å—Ç—Ä–æ–µ–∫ (—É–¥–∞–ª–µ–Ω–∞ - —Ç–µ–ø–µ—Ä—å –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∞ –≤ –Ω–∞—á–∞–ª–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã)

// –§—É–Ω–∫—Ü–∏—è –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è –º–µ–Ω—é
function toggleMenu() {
    console.log('toggleMenu –≤—ã–∑–≤–∞–Ω–∞');
    const menu = document.getElementById('popupMenu');
    console.log('–ú–µ–Ω—é –Ω–∞–π–¥–µ–Ω–æ:', menu);
    console.log('–¢–µ–∫—É—â–∏–π display –º–µ–Ω—é:', menu.style.display);
    
    if (menu.style.display === 'none' || menu.style.display === '') {
        console.log('–û—Ç–∫—Ä—ã–≤–∞–µ–º –º–µ–Ω—é');
        menu.style.display = 'flex';
    } else {
        console.log('–ó–∞–∫—Ä—ã–≤–∞–µ–º –º–µ–Ω—é');
        menu.style.display = 'none';
    }
}

// –§—É–Ω–∫—Ü–∏—è –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è —Ä–µ–∂–∏–º–æ–≤ —Ä–∞–±–æ—Ç—ã (—É–¥–∞–ª–µ–Ω–∞ - —Ç–µ–ø–µ—Ä—å –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∞ –≤ –Ω–∞—á–∞–ª–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã)

// –§—É–Ω–∫—Ü–∏–∏ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å Jivo –≤–∏–¥–∂–µ—Ç–∞–º–∏ (—É–¥–∞–ª–µ–Ω—ã - —Ç–µ–ø–µ—Ä—å –æ–ø—Ä–µ–¥–µ–ª–µ–Ω—ã –≤ –Ω–∞—á–∞–ª–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã)

function loadJivoScript(scriptSrc) {
    if (loadedJivoScripts.has(scriptSrc)) {
        // –ï—Å–ª–∏ —Å–∫—Ä–∏–ø—Ç —É–∂–µ –∑–∞–≥—Ä—É–∂–µ–Ω, –ø—ã—Ç–∞–µ–º—Å—è –æ—Ç–∫—Ä—ã—Ç—å –≤–∏–¥–∂–µ—Ç
        if (window.jivo_api && typeof window.jivo_api.open === 'function') {
            window.jivo_api.open();
        } else {
            setTimeout(() => {
                if (window.jivo_api && typeof window.jivo_api.open === 'function') {
                    window.jivo_api.open();
                }
            }, 500);
        }
        return;
    }
    
    const script = document.createElement('script');
    script.src = scriptSrc;
    script.async = true;
    
    // –î–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –∑–∞–≥—Ä—É–∑–∫–∏ —Å–∫—Ä–∏–ø—Ç–∞
    script.onload = function() {
        // –ñ–¥–µ–º –Ω–µ–º–Ω–æ–≥–æ, —á—Ç–æ–±—ã –≤–∏–¥–∂–µ—Ç –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–ª—Å—è
        setTimeout(() => {
            if (window.jivo_api && typeof window.jivo_api.open === 'function') {
                window.jivo_api.open();
            } else {
                // –ï—Å–ª–∏ API –µ—â–µ –Ω–µ –≥–æ—Ç–æ–≤, –∂–¥–µ–º –µ—â–µ –Ω–µ–º–Ω–æ–≥–æ
                setTimeout(() => {
                    if (window.jivo_api && typeof window.jivo_api.open === 'function') {
                        window.jivo_api.open();
                    }
                }, 1000);
            }
        }, 300);
    };
    
    document.head.appendChild(script);
    loadedJivoScripts.add(scriptSrc);
}

// –§—É–Ω–∫—Ü–∏—è –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è —Å–µ–∫—Ü–∏–∏ Jivo
function toggleJivoSection() {
    const enabled = document.getElementById('jivoEnabled').checked;
    const iconSection = document.getElementById('jivoIconSection');
    const codeSection = document.getElementById('jivoCodeSection');
    jivoSettings.enabled = enabled;
    
    if (enabled) {
        iconSection.style.display = 'block';
        codeSection.style.display = 'block';
    } else {
        iconSection.style.display = 'none';
        codeSection.style.display = 'none';
    }
}

// –§—É–Ω–∫—Ü–∏—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Ä–µ–∂–∏–º–∞ —á–∞—Ç–∞
function handleJivoChatModeChange() {
    const chatMode = document.getElementById('jivoChatMode').checked;
    jivoSettings.chatMode = chatMode;
    
    // –ï—Å–ª–∏ –≤–∫–ª—é—á–µ–Ω —Ä–µ–∂–∏–º —á–∞—Ç–∞, –æ—Ç–∫–ª—é—á–∞–µ–º —Å–æ—Ü–∏–∞–ª—å–Ω—ã–µ —Å–µ—Ç–∏
    if (chatMode) {
        socialButtons = [];
        renderSocialInputs();
    }
    
    // –ü–µ—Ä–µ—Å–æ–∑–¥–∞–µ–º –º—É–ª—å—Ç–∏–∫–Ω–æ–ø–∫—É
    createMultibutton();
    
    // –û–±–Ω–æ–≤–ª—è–µ–º –∏–∫–æ–Ω–∫—É –≥–ª–∞–≤–Ω–æ–π –∫–Ω–æ–ø–∫–∏
    updateMainButtonIcon();
}

// –§—É–Ω–∫—Ü–∏—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∫–ª–∏–∫–∞ –ø–æ –≥–ª–∞–≤–Ω–æ–π –∫–Ω–æ–ø–∫–µ
function handleMainButtonClickMain() {
    if (jivoSettings.chatMode && jivoSettings.enabled) {
        // –í —Ä–µ–∂–∏–º–µ —á–∞—Ç–∞ –æ—Ç–∫—Ä—ã–≤–∞–µ–º Jivo
        openJivoChat();
    } else {
        // –û–±—ã—á–Ω—ã–π —Ä–µ–∂–∏–º - –ø–µ—Ä–µ–∫–ª—é—á–∞–µ–º –º–µ–Ω—é
        toggleMenu();
    }
}

// –§—É–Ω–∫—Ü–∏—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å—Å—ã–ª–∫–∏ –Ω–∞ –∏–∫–æ–Ω–∫—É Jivo
function handleJivoIconUrl() {
    const urlInput = document.getElementById('jivoIconUrl');
    const url = urlInput.value.trim();
    
    if (url) {
        jivoSettings.customIcon = url;
        
        // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–π –ø—Ä–æ—Å–º–æ—Ç—Ä
        const preview = document.getElementById('jivoIconPreview');
        const previewImg = document.getElementById('jivoIconPreviewImg');
        previewImg.src = url;
        preview.style.display = 'block';
        
        showNotification('‚úÖ –°—Å—ã–ª–∫–∞ –Ω–∞ –∏–∫–æ–Ω–∫—É –¥–æ–±–∞–≤–ª–µ–Ω–∞!', 'success');
    }
}

// –§—É–Ω–∫—Ü–∏—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å–ø–æ—Å–æ–±–∞ –æ—Ç–∫—Ä—ã—Ç–∏—è –º–µ–Ω—é
function handleOpenMethodChange() {
    const clickRadio = document.getElementById('openMethodClick');
    if (clickRadio.checked) {
        displaySettings.openMethod = 'click';
    } else {
        displaySettings.openMethod = 'always';
    }
    updateMenuDisplay();
}

// –§—É–Ω–∫—Ü–∏—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è –æ—Ä–∏–µ–Ω—Ç–∞—Ü–∏–∏ –º–µ–Ω—é
function handleMenuOrientationChange() {
    const verticalRadio = document.getElementById('menuOrientationVertical');
    if (verticalRadio.checked) {
        displaySettings.menuOrientation = 'vertical';
    } else {
        displaySettings.menuOrientation = 'horizontal';
    }
    updateMenuDisplay();
}

// –§—É–Ω–∫—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –º–µ–Ω—é
function updateMenuDisplay() {
    const menu = document.getElementById('popupMenu');
    const mainButton = document.querySelector('.main-button');
    
    if (displaySettings.openMethod === 'always') {
        menu.style.display = 'flex';
        if (mainButton) {
            mainButton.style.display = 'none';
        }
    } else {
        menu.style.display = 'none';
        if (mainButton) {
            mainButton.style.display = 'flex';
        }
    }
    
    // –û–±–Ω–æ–≤–ª—è–µ–º –æ—Ä–∏–µ–Ω—Ç–∞—Ü–∏—é –º–µ–Ω—é
    if (displaySettings.menuOrientation === 'horizontal') {
        menu.style.flexDirection = 'row';
    } else {
        menu.style.flexDirection = 'column';
    }
    
    // –û–±–Ω–æ–≤–ª—è–µ–º –ø–æ–∑–∏—Ü–∏—é –º–µ–Ω—é —Å —É—á–µ—Ç–æ–º —Ä–∞–∑–º–µ—Ä–∞ –∫–Ω–æ–ø–∫–∏
    updateMenuPosition();
}

// –§—É–Ω–∫—Ü–∏—è —É–¥–∞–ª–µ–Ω–∏—è –∑–∞–≥—Ä—É–∂–µ–Ω–Ω–æ–π –∏–∫–æ–Ω–∫–∏
function removeJivoIcon() {
    jivoSettings.customIcon = null;
    document.getElementById('jivoIconUrl').value = '';
    document.getElementById('jivoIconPreview').style.display = 'none';
    showNotification('üóëÔ∏è –°—Å—ã–ª–∫–∞ –Ω–∞ –∏–∫–æ–Ω–∫—É —É–¥–∞–ª–µ–Ω–∞', 'info');
}

// –§—É–Ω–∫—Ü–∏—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ç–∏–ø–∞ –≥–ª–∞–≤–Ω–æ–π –∏–∫–æ–Ω–∫–∏ (–ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–∞ –¥–ª—è –∏–∑–±–µ–∂–∞–Ω–∏—è –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤)
function handleMainIconChangeMain() {
    const defaultIcon = document.getElementById('defaultIcon');
    const customSection = document.getElementById('customMainIconSection');
    
    if (defaultIcon.checked) {
        mainIconSettings.type = 'default';
        customSection.style.display = 'none';
        mainIconSettings.customUrl = null;
        updateMainButtonIcon();
    } else {
        mainIconSettings.type = 'custom';
        customSection.style.display = 'block';
    }
}

// –§—É–Ω–∫—Ü–∏—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å—Å—ã–ª–∫–∏ –Ω–∞ –≥–ª–∞–≤–Ω—É—é –∏–∫–æ–Ω–∫—É
function handleMainIconUrl() {
    const urlInput = document.getElementById('mainIconUrl');
    const url = urlInput.value.trim();
    
    if (url) {
        mainIconSettings.customUrl = url;
        
        // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–π –ø—Ä–æ—Å–º–æ—Ç—Ä
        const preview = document.getElementById('mainIconPreview');
        const previewImg = document.getElementById('mainIconPreviewImg');
        previewImg.src = url;
        preview.style.display = 'block';
        
        updateMainButtonIcon();
        showNotification('‚úÖ –°—Å—ã–ª–∫–∞ –Ω–∞ –≥–ª–∞–≤–Ω—É—é –∏–∫–æ–Ω–∫—É –¥–æ–±–∞–≤–ª–µ–Ω–∞!', 'success');
    }
}

// –§—É–Ω–∫—Ü–∏—è —É–¥–∞–ª–µ–Ω–∏—è –≥–ª–∞–≤–Ω–æ–π –∏–∫–æ–Ω–∫–∏
function removeMainIcon() {
    mainIconSettings.customUrl = null;
    document.getElementById('mainIconUrl').value = '';
    document.getElementById('mainIconPreview').style.display = 'none';
    updateMainButtonIcon();
    showNotification('üóëÔ∏è –°—Å—ã–ª–∫–∞ –Ω–∞ –≥–ª–∞–≤–Ω—É—é –∏–∫–æ–Ω–∫—É —É–¥–∞–ª–µ–Ω–∞', 'info');
}

// –§—É–Ω–∫—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –≥–ª–∞–≤–Ω–æ–π –∫–Ω–æ–ø–∫–∏
function updateMainButtonIcon() {
    const mainButtonElement = document.querySelector('.main-button');
    const defaultIcon = mainButtonElement.querySelector('.default-icon');
    const customIcon = mainButtonElement.querySelector('.custom-icon');
    
    // –í —Ä–µ–∂–∏–º–µ —á–∞—Ç–∞ –∏—Å–ø–æ–ª—å–∑—É–µ–º –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≥–ª–∞–≤–Ω–æ–π –∫–Ω–æ–ø–∫–∏
    if (jivoSettings.chatMode && jivoSettings.enabled) {
        if (mainIconSettings.type === 'custom' && mainIconSettings.customUrl) {
            // –ò—Å–ø–æ–ª—å–∑—É–µ–º –∫–∞—Å—Ç–æ–º–Ω—É—é –∏–∫–æ–Ω–∫—É –∏–∑ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –≥–ª–∞–≤–Ω–æ–π –∫–Ω–æ–ø–∫–∏
            customIcon.src = mainIconSettings.customUrl;
            customIcon.style.display = 'block';
            customIcon.style.width = '100%';
            customIcon.style.height = '100%';
            customIcon.style.objectFit = 'cover';
            customIcon.style.filter = 'none';
            customIcon.style.position = 'absolute';
            customIcon.style.top = '0';
            customIcon.style.left = '0';
            customIcon.style.zIndex = '1';
            customIcon.style.padding = '0';
            
            // –°–∫—Ä—ã–≤–∞–µ–º —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—É—é –∏–∫–æ–Ω–∫—É
            defaultIcon.style.display = 'none';
        } else {
            // –ò—Å–ø–æ–ª—å–∑—É–µ–º —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—É—é –∏–∫–æ–Ω–∫—É –∏–∑ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –≥–ª–∞–≤–Ω–æ–π –∫–Ω–æ–ø–∫–∏
            defaultIcon.src = 'https://cdn-icons-png.flaticon.com/512/1827/1827933.png';
            defaultIcon.style.display = 'block';
            defaultIcon.style.width = '30px';
            defaultIcon.style.height = '30px';
            defaultIcon.style.objectFit = 'contain';
            defaultIcon.style.filter = 'brightness(0) invert(1)';
            defaultIcon.style.position = 'relative';
            defaultIcon.style.top = '';
            defaultIcon.style.left = '';
            defaultIcon.style.zIndex = '';
            
            // –°–∫—Ä—ã–≤–∞–µ–º –∫–∞—Å—Ç–æ–º–Ω—É—é –∏–∫–æ–Ω–∫—É
            customIcon.style.display = 'none';
        }
    } else {
        // –û–±—ã—á–Ω—ã–π —Ä–µ–∂–∏–º
        if (mainIconSettings.type === 'custom' && mainIconSettings.customUrl) {
            // –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º –∫–∞—Å—Ç–æ–º–Ω—É—é –∏–∫–æ–Ω–∫—É
            customIcon.src = mainIconSettings.customUrl;
            customIcon.style.display = 'block';
            customIcon.style.width = '100%';
            customIcon.style.height = '100%';
            customIcon.style.objectFit = 'cover';
            customIcon.style.filter = 'none'; // –£–±–∏—Ä–∞–µ–º —Ñ–∏–ª—å—Ç—Ä –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã—Ö —Ü–≤–µ—Ç–æ–≤
            customIcon.style.position = 'absolute';
            customIcon.style.top = '0';
            customIcon.style.left = '0';
            customIcon.style.zIndex = '1';
            customIcon.style.padding = '0';
            
            // –°–∫—Ä—ã–≤–∞–µ–º —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—É—é –∏–∫–æ–Ω–∫—É
            defaultIcon.style.display = 'none';
            
            // –û–±–Ω–æ–≤–ª—è–µ–º —Ñ–æ—Ä–º—É –∫–Ω–æ–ø–∫–∏ –µ—Å–ª–∏ –≤–∫–ª—é—á–µ–Ω–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞
            if (mainIconSettings.shapeType === 'custom') {
                updateMainButtonShape();
            }
        } else {
            // –í–æ–∑–≤—Ä–∞—â–∞–µ–º —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—É—é –∏–∫–æ–Ω–∫—É
            defaultIcon.src = 'https://cdn-icons-png.flaticon.com/512/1827/1827933.png';
            defaultIcon.style.display = 'block';
            defaultIcon.style.width = '30px';
            defaultIcon.style.height = '30px';
            defaultIcon.style.objectFit = 'contain';
            defaultIcon.style.filter = 'brightness(0) invert(1)';
            defaultIcon.style.position = 'relative';
            defaultIcon.style.top = '';
            defaultIcon.style.left = '';
            defaultIcon.style.zIndex = '';
            
            // –°–∫—Ä—ã–≤–∞–µ–º –∫–∞—Å—Ç–æ–º–Ω—É—é –∏–∫–æ–Ω–∫—É
            customIcon.style.display = 'none';
            
            // –í–æ–∑–≤—Ä–∞—â–∞–µ–º –∫ —Ñ–æ—Ä–º–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
            if (mainIconSettings.shapeType === 'custom') {
                updateMainButtonShape();
            }
        }
    }
}

// –§—É–Ω–∫—Ü–∏—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ç–∏–ø–∞ —Ü–≤–µ—Ç–∞ –≥–ª–∞–≤–Ω–æ–π –∫–Ω–æ–ø–∫–∏
function handleMainColorChange() {
    const defaultColor = document.getElementById('defaultColor');
    const customSection = document.getElementById('customMainColorSection');
    
    if (defaultColor.checked) {
        mainIconSettings.colorType = 'default';
        customSection.style.display = 'none';
        updateMainButtonColor();
    } else {
        mainIconSettings.colorType = 'custom';
        customSection.style.display = 'block';
        updateMainButtonColor();
        updateMainColorPreview();
        if (mainIconSettings.customColor) {
            updateColorInfo(mainIconSettings.customColor);
        }
    }
    
    // –û–±–Ω–æ–≤–ª—è–µ–º –∏–∫–æ–Ω–∫—É –≤ —Ä–µ–∂–∏–º–µ —á–∞—Ç–∞
    updateMainButtonIcon();
}

// –§—É–Ω–∫—Ü–∏—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –≤—ã–±–æ—Ä–∞ —Ü–≤–µ—Ç–∞ —á–µ—Ä–µ–∑ color picker
function handleMainColorPicker() {
    const colorPicker = document.getElementById('mainColorPicker');
    const colorCode = document.getElementById('mainColorCode');
    const color = colorPicker.value;
    
    mainIconSettings.customColor = color;
    colorCode.value = color;
    
    updateMainButtonColor();
    updateMainColorPreview();
    updateColorInfo(color);
    updateMainButtonIcon(); // –û–±–Ω–æ–≤–ª—è–µ–º –∏–∫–æ–Ω–∫—É –≤ —Ä–µ–∂–∏–º–µ —á–∞—Ç–∞
    showNotification('‚úÖ –¶–≤–µ—Ç –∫–Ω–æ–ø–∫–∏ –∏–∑–º–µ–Ω–µ–Ω!', 'success');
}

// –§—É–Ω–∫—Ü–∏—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –≤–≤–æ–¥–∞ —Ü–≤–µ—Ç–æ–≤–æ–≥–æ –∫–æ–¥–∞
function handleMainColorCode() {
    const colorCode = document.getElementById('mainColorCode');
    const colorPicker = document.getElementById('mainColorPicker');
    const color = colorCode.value.trim();
    
    if (color && /^#[0-9A-F]{6}$/i.test(color)) {
        mainIconSettings.customColor = color;
        colorPicker.value = color;
        
        updateMainButtonColor();
        updateMainColorPreview();
        updateColorInfo(color);
        updateMainButtonIcon(); // –û–±–Ω–æ–≤–ª—è–µ–º –∏–∫–æ–Ω–∫—É –≤ —Ä–µ–∂–∏–º–µ —á–∞—Ç–∞
        showNotification('‚úÖ –¶–≤–µ—Ç–æ–≤–æ–π –∫–æ–¥ –ø—Ä–∏–º–µ–Ω–µ–Ω!', 'success');
    } else if (color) {
        showNotification('‚ùå –ù–µ–≤–µ—Ä–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç —Ü–≤–µ—Ç–∞! –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ #RRGGBB', 'error');
    }
}

// –§—É–Ω–∫—Ü–∏—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ñ–æ—Ä–º—ã –≥–ª–∞–≤–Ω–æ–π –∫–Ω–æ–ø–∫–∏
function handleMainShapeChange() {
    const defaultShape = document.getElementById('defaultShape');
    const customSizeShape = document.getElementById('customSizeShape');
    const customSizeSection = document.getElementById('customSizeSection');
    
    if (defaultShape.checked) {
        mainIconSettings.shapeType = 'default';
        customSizeSection.style.display = 'none';
        updateMainButtonShape();
    } else if (customSizeShape.checked) {
        mainIconSettings.shapeType = 'customSize';
        customSizeSection.style.display = 'block';
        updateMainButtonShape();
    }
    
    // –û–±–Ω–æ–≤–ª—è–µ–º –∏–∫–æ–Ω–∫—É –≤ —Ä–µ–∂–∏–º–µ —á–∞—Ç–∞
    updateMainButtonIcon();
}

// –§—É–Ω–∫—Ü–∏—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Ñ–æ—Ä–º—ã –∏–∫–æ–Ω–∫–∏
function detectIconShape(imageUrl) {
    return new Promise((resolve) => {
        const img = new Image();
        img.onload = function() {
            const ratio = this.width / this.height;
            let shape = 'circle';
            
            // –î–ª—è –æ—á–µ–Ω—å —à–∏—Ä–æ–∫–∏—Ö –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π (–ª–æ–≥–æ—Ç–∏–ø—ã) –∏—Å–ø–æ–ª—å–∑—É–µ–º –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω—É—é —Ñ–æ—Ä–º—É
            if (ratio > 5) {
                shape = 'extra-wide';
            } else if (ratio > 3) {
                shape = 'horizontal';
            } else if (Math.abs(ratio - 1) < 0.1) {
                shape = 'square';
            } else if (ratio > 1.2) {
                shape = 'horizontal';
            } else if (ratio < 0.8) {
                shape = 'vertical';
            }
            
            resolve(shape);
        };
        img.onerror = function() {
            resolve('circle'); // –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –∫—Ä—É–≥–ª–∞—è
        };
        img.src = imageUrl;
    });
}

// –§—É–Ω–∫—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Ñ–æ—Ä–º—ã –≥–ª–∞–≤–Ω–æ–π –∫–Ω–æ–ø–∫–∏
async function updateMainButtonShape() {
    const mainButton = document.querySelector('.main-button');
    const customIcon = mainButton.querySelector('.custom-icon');
    
    if (mainIconSettings.shapeType === 'customSize') {
        // –ü—Ä–∏–º–µ–Ω—è–µ–º —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–µ —Ä–∞–∑–º–µ—Ä—ã
        const customWidth = document.getElementById('customWidth').value;
        const customHeight = document.getElementById('customHeight').value;
        const customBorderRadius = document.getElementById('customBorderRadius').value;
        
        mainButton.style.width = customWidth + 'px';
        mainButton.style.height = customHeight + 'px';
        mainButton.style.borderRadius = customBorderRadius + 'px';
        
        if (customIcon) {
            customIcon.style.borderRadius = customBorderRadius + 'px';
            customIcon.style.objectFit = 'cover';
            customIcon.style.padding = '0';
        }
    } else {
        // –í–æ–∑–≤—Ä–∞—â–∞–µ–º –∫ —Ñ–æ—Ä–º–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
        mainButton.style.borderRadius = '50%';
        mainButton.style.width = '60px';
        mainButton.style.height = '60px';
        if (customIcon) {
            customIcon.style.borderRadius = '50%';
        }
    }
    
    // –û–±–Ω–æ–≤–ª—è–µ–º –ø–æ–∑–∏—Ü–∏—é –≤—ã–ø–∞–¥–∞—é—â–µ–≥–æ –º–µ–Ω—é
    updateMenuPosition();
    
    // –û–±–Ω–æ–≤–ª—è–µ–º –∏–∫–æ–Ω–∫—É –≤ —Ä–µ–∂–∏–º–µ —á–∞—Ç–∞
    updateMainButtonIcon();
}

// –§—É–Ω–∫—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –ø–æ–∑–∏—Ü–∏–∏ –≤—ã–ø–∞–¥–∞—é—â–µ–≥–æ –º–µ–Ω—é
function updateMenuPosition() {
    try {
        const mainButton = document.querySelector('.main-button');
        const popupMenu = document.getElementById('popupMenu');
        
        if (mainButton && popupMenu) {
            const buttonHeight = mainButton.offsetHeight || 60; // –ó–Ω–∞—á–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
            const gap = 10; // –û—Ç—Å—Ç—É–ø –º–µ–∂–¥—É –∫–Ω–æ–ø–∫–æ–π –∏ –º–µ–Ω—é
            
            // –í—ã—á–∏—Å–ª—è–µ–º –Ω–æ–≤—É—é –ø–æ–∑–∏—Ü–∏—é –º–µ–Ω—é
            const newBottom = buttonHeight + gap;
            
            // –ü—Ä–∏–º–µ–Ω—è–µ–º –ø–æ–∑–∏—Ü–∏—é –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –æ—Ä–∏–µ–Ω—Ç–∞—Ü–∏–∏
            if (displaySettings.menuOrientation === 'horizontal') {
                popupMenu.style.bottom = gap + 'px';
                popupMenu.style.right = (buttonHeight + gap) + 'px';
            } else {
                popupMenu.style.bottom = newBottom + 'px';
                popupMenu.style.right = '0';
            }
        }
    } catch (error) {
        console.log('–û—à–∏–±–∫–∞ –≤ updateMenuPosition:', error);
    }
}

// –§—É–Ω–∫—Ü–∏—è —É–¥–∞–ª–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ —Ü–≤–µ—Ç–∞
function removeMainColor() {
    mainIconSettings.colorType = 'default';
    document.getElementById('defaultColor').checked = true;
    document.getElementById('customMainColorSection').style.display = 'none';
    document.getElementById('mainColorPreviewBox').style.display = 'none';
    document.getElementById('colorInfo').textContent = '';
    updateMainButtonColor();
    showNotification('üóëÔ∏è –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π —Ü–≤–µ—Ç —É–¥–∞–ª–µ–Ω', 'info');
}

// –§—É–Ω–∫—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Ü–≤–µ—Ç–∞ –≥–ª–∞–≤–Ω–æ–π –∫–Ω–æ–ø–∫–∏
function updateMainButtonColor() {
    const mainButton = document.querySelector('.main-button');
    if (mainIconSettings.colorType === 'custom') {
        mainButton.style.background = mainIconSettings.customColor;
    } else {
        mainButton.style.background = 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)';
    }
}

// –§—É–Ω–∫—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ–≥–æ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ —Ü–≤–µ—Ç–∞
function updateMainColorPreview() {
    const previewBox = document.getElementById('mainColorPreviewBox');
    
    if (mainIconSettings.colorType === 'custom') {
        previewBox.style.background = mainIconSettings.customColor;
        previewBox.style.display = 'block';
    } else {
        previewBox.style.display = 'none';
    }
}

// –§—É–Ω–∫—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Ü–≤–µ—Ç–µ
function updateColorInfo(color) {
    const colorInfo = document.getElementById('colorInfo');
    if (color) {
        // –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ–º HEX –≤ RGB
        const r = parseInt(color.substr(1,2), 16);
        const g = parseInt(color.substr(3,2), 16);
        const b = parseInt(color.substr(5,2), 16);
        
        colorInfo.textContent = `RGB: ${r}, ${g}, ${b}`;
    } else {
        colorInfo.textContent = '';
    }
}

// –ü–æ–ø—É–ª—è—Ä–Ω—ã–µ —Å–æ—Ü—Å–µ—Ç–∏ –∏ –º–µ—Å—Å–µ–Ω–¥–∂–µ—Ä—ã
const popularSocials = [
    { name: 'Telegram', icon: 'https://cdn-icons-png.flaticon.com/512/2111/2111646.png', link: 'https://t.me/' },
    { name: 'WhatsApp', icon: 'https://cdn-icons-png.flaticon.com/512/733/733585.png', link: 'https://wa.me/' },
    { name: 'VK', icon: 'https://cdn-icons-png.flaticon.com/512/145/145813.png', link: 'https://vk.com/' },
    { name: 'Instagram', icon: 'https://cdn-icons-png.flaticon.com/512/2111/2111463.png', link: 'https://instagram.com/' },
    { name: 'Facebook', icon: 'https://cdn-icons-png.flaticon.com/512/2111/2111392.png', link: 'https://facebook.com/' },
    { name: 'Twitter', icon: 'https://cdn-icons-png.flaticon.com/512/2111/2111738.png', link: 'https://twitter.com/' },
    { name: 'YouTube', icon: 'https://cdn-icons-png.flaticon.com/512/3670/3670147.png', link: 'https://youtube.com/' },
    { name: '–û–¥–Ω–æ–∫–ª–∞—Å—Å–Ω–∏–∫–∏', icon: 'https://cdn-icons-png.flaticon.com/512/889/889125.png', link: 'https://ok.ru/' },
    { name: '–ò–º–µ–π–ª', icon: 'https://cdn-icons-png.flaticon.com/512/561/561127.png', link: 'mailto:' }
];

// –§—É–Ω–∫—Ü–∏—è –ø–æ–∫–∞–∑–∞ —Å–µ–ª–µ–∫—Ç–æ—Ä–∞ —Å–æ—Ü—Å–µ—Ç–µ–π
function showSocialSelector() {
    const modal = document.getElementById('socialSelectorModal');
    const grid = document.getElementById('socialSelectorGrid');
    
    // –û—á–∏—â–∞–µ–º –∏ –∑–∞–ø–æ–ª–Ω—è–µ–º —Å–µ—Ç–∫—É
    grid.innerHTML = '';
    
    popularSocials.forEach(social => {
        const option = document.createElement('div');
        option.className = 'social-option';
        option.onclick = () => selectSocial(social);
        
        option.innerHTML = `
            <img src="${social.icon}" alt="${social.name}" onerror="this.src='https://cdn-icons-png.flaticon.com/512/1827/1827933.png'">
            <span>${social.name}</span>
        `;
        
        grid.appendChild(option);
    });
    
    modal.style.display = 'flex';
}

// –§—É–Ω–∫—Ü–∏—è —Å–∫—Ä—ã—Ç–∏—è —Å–µ–ª–µ–∫—Ç–æ—Ä–∞
function hideSocialSelectorMain() {
    document.getElementById('socialSelectorModal').style.display = 'none';
    
    // –£–±–µ–∂–¥–∞–µ–º—Å—è, —á—Ç–æ –ø–∞–Ω–µ–ª—å –Ω–∞—Å—Ç—Ä–æ–µ–∫ –æ—Å—Ç–∞–µ—Ç—Å—è –æ—Ç–∫—Ä—ã—Ç–æ–π
    setTimeout(() => {
        const settingsPanel = document.getElementById('settingsPanel');
        if (settingsPanel && settingsPanel.style.display === 'none') {
            settingsPanel.style.display = 'block';
        }
    }, 50);
}

// –§—É–Ω–∫—Ü–∏—è –ø–æ–∫–∞–∑–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
function showNotification(message, type = 'success', duration = 3000) {
    const container = document.getElementById('notificationContainer');
    
    const notification = document.createElement('div');
    notification.className = `notification ${type}`;
    notification.textContent = message;
    
    container.appendChild(notification);
    
    // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
    setTimeout(() => {
        notification.classList.add('show');
    }, 100);
    
    // –°–∫—Ä—ã–≤–∞–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
    setTimeout(() => {
        notification.classList.remove('show');
        setTimeout(() => {
            if (container.contains(notification)) {
                container.removeChild(notification);
            }
        }, 300);
    }, duration);
}

// –§—É–Ω–∫—Ü–∏—è –ø–æ–∫–∞–∑–∞ –ø–æ–¥—Å–∫–∞–∑–∫–∏ –æ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–∏ –Ω–∞—Å—Ç—Ä–æ–µ–∫
function showSettingsHint() {
    const hint = document.getElementById('settingsHint');
    hint.style.display = 'block';
}

// –§—É–Ω–∫—Ü–∏—è –≤—ã–±–æ—Ä–∞ —Å–æ—Ü—Å–µ—Ç–∏
function selectSocial(social) {
    const newId = 'custom_' + nextId++;
    const newSetting = {
        id: newId,
        name: social.name,
        link: social.link,
        icon: social.icon
    };
    socialSettings.push(newSetting);
    
    // –°–Ω–∞—á–∞–ª–∞ —Å–∫—Ä—ã–≤–∞–µ–º —Å–µ–ª–µ–∫—Ç–æ—Ä
    hideSocialSelector();
    
    // –ó–∞—Ç–µ–º –æ–±–Ω–æ–≤–ª—è–µ–º –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∏ —É–±–µ–∂–¥–∞–µ–º—Å—è, —á—Ç–æ –ø–∞–Ω–µ–ª—å –æ—Ç–∫—Ä—ã—Ç–∞
    renderSocialInputs();
    
    // –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ –æ—Ç–∫—Ä—ã–≤–∞–µ–º –ø–∞–Ω–µ–ª—å –Ω–∞—Å—Ç—Ä–æ–µ–∫
    const settingsPanel = document.getElementById('settingsPanel');
    settingsPanel.style.display = 'block';
    
    // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –∏ –ø–æ–¥—Å–∫–∞–∑–∫—É
    showNotification(`‚úÖ ${social.name} –¥–æ–±–∞–≤–ª–µ–Ω! –ù–µ –∑–∞–±—É–¥—å—Ç–µ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å —Å—Å—ã–ª–∫—É –∏ –Ω–∞–∂–∞—Ç—å "–ü—Ä–∏–º–µ–Ω–∏—Ç—å"`, 'info');
    showSettingsHint();
    
    // –ü—Ä–æ–∫—Ä—É—á–∏–≤–∞–µ–º –∫ –Ω–æ–≤–æ–π –∫–Ω–æ–ø–∫–µ –¥–ª—è —É–¥–æ–±—Å—Ç–≤–∞
    setTimeout(() => {
        const newInput = document.getElementById(newId + '_link');
        if (newInput) {
            newInput.scrollIntoView({ behavior: 'smooth', block: 'center' });
            newInput.focus();
        }
    }, 200);
}

// –§—É–Ω–∫—Ü–∏—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –Ω–æ–≤–æ–π –∫–Ω–æ–ø–∫–∏ (–ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–∞ –¥–ª—è –∏–∑–±–µ–∂–∞–Ω–∏—è –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤)
function addSocialInputMain() {
    // –£–±–µ–∂–¥–∞–µ–º—Å—è, —á—Ç–æ –ø–∞–Ω–µ–ª—å –Ω–∞—Å—Ç—Ä–æ–µ–∫ –æ—Ç–∫—Ä—ã—Ç–∞
    document.getElementById('settingsPanel').style.display = 'block';
    showSocialSelector();
}

// –§—É–Ω–∫—Ü–∏—è —Å–æ–∑–¥–∞–Ω–∏—è —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ–π –∫–Ω–æ–ø–∫–∏ (–ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–∞ –¥–ª—è –∏–∑–±–µ–∂–∞–Ω–∏—è –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤)
function addCustomSocialInputMain() {
    const customId = 'custom_' + nextId++;
    
    // –°–æ–∑–¥–∞–µ–º –Ω–æ–≤—É—é –Ω–∞—Å—Ç—Ä–æ–π–∫—É —Å –ø—É—Å—Ç—ã–º–∏ –ø–æ–ª—è–º–∏
    const newSetting = {
        id: customId,
        name: '–ú–æ—è –∫–Ω–æ–ø–∫–∞',
        link: '',
        icon: 'https://cdn-icons-png.flaticon.com/512/1827/1827933.png' // –ò–∫–æ–Ω–∫–∞ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
    };
    
    socialSettings.push(newSetting);
    renderSocialInputs();
    
    // –£–±–µ–∂–¥–∞–µ–º—Å—è, —á—Ç–æ –ø–∞–Ω–µ–ª—å –Ω–∞—Å—Ç—Ä–æ–µ–∫ –æ—Å—Ç–∞–µ—Ç—Å—è –æ—Ç–∫—Ä—ã—Ç–æ–π
    const settingsPanel = document.getElementById('settingsPanel');
    settingsPanel.style.display = 'block';
    
    // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –∏ –ø–æ–¥—Å–∫–∞–∑–∫—É
    showNotification('üé® –°–æ–∑–¥–∞–Ω–∞ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–∞—è –∫–Ω–æ–ø–∫–∞! –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –µ—ë –ø–∞—Ä–∞–º–µ—Ç—Ä—ã', 'success');
    showSettingsHint();
    
    // –ü—Ä–æ–∫—Ä—É—á–∏–≤–∞–µ–º –∫ –Ω–æ–≤–æ–º—É –ø–æ–ª—é –∏ —Ñ–æ–∫—É—Å–∏—Ä—É–µ–º—Å—è –Ω–∞ –Ω–∞–∑–≤–∞–Ω–∏–∏
    setTimeout(() => {
        const nameInput = document.getElementById(customId + '_name');
        if (nameInput) {
            nameInput.scrollIntoView({ behavior: 'smooth', block: 'center' });
            nameInput.focus();
            nameInput.select();
        }
    }, 100);
}

// –§—É–Ω–∫—Ü–∏—è –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏—è –∫–Ω–æ–ø–∫–∏ –≤–≤–µ—Ä—Ö (–ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–∞ –¥–ª—è –∏–∑–±–µ–∂–∞–Ω–∏—è –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤)
function moveSocialUpMain(index) {
    if (index > 0) {
        const temp = socialSettings[index];
        socialSettings[index] = socialSettings[index - 1];
        socialSettings[index - 1] = temp;
        renderSocialInputs();
        
        // –£–±–µ–∂–¥–∞–µ–º—Å—è, —á—Ç–æ –ø–∞–Ω–µ–ª—å –Ω–∞—Å—Ç—Ä–æ–µ–∫ –æ—Å—Ç–∞–µ—Ç—Å—è –æ—Ç–∫—Ä—ã—Ç–æ–π
        const settingsPanel = document.getElementById('settingsPanel');
        settingsPanel.style.display = 'block';
        
        showNotification(`‚¨ÜÔ∏è ${temp.name} –ø–µ—Ä–µ–º–µ—â–µ–Ω –≤–≤–µ—Ä—Ö`, 'info');
        showSettingsHint();
    }
    
    // –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ–º –≤—Å–ø–ª—ã—Ç–∏–µ —Å–æ–±—ã—Ç–∏—è
    event.stopPropagation();
}

// –§—É–Ω–∫—Ü–∏—è –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏—è –∫–Ω–æ–ø–∫–∏ –≤–Ω–∏–∑ (–ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–∞ –¥–ª—è –∏–∑–±–µ–∂–∞–Ω–∏—è –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤)
function moveSocialDownMain(index) {
    if (index < socialSettings.length - 1) {
        const temp = socialSettings[index];
        socialSettings[index] = socialSettings[index + 1];
        socialSettings[index + 1] = temp;
        renderSocialInputs();
        
        // –£–±–µ–∂–¥–∞–µ–º—Å—è, —á—Ç–æ –ø–∞–Ω–µ–ª—å –Ω–∞—Å—Ç—Ä–æ–µ–∫ –æ—Å—Ç–∞–µ—Ç—Å—è –æ—Ç–∫—Ä—ã—Ç–æ–π
        const settingsPanel = document.getElementById('settingsPanel');
        settingsPanel.style.display = 'block';
        
        showNotification(`‚¨áÔ∏è ${temp.name} –ø–µ—Ä–µ–º–µ—â–µ–Ω –≤–Ω–∏–∑`, 'info');
        showSettingsHint();
    }
    
    // –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ–º –≤—Å–ø–ª—ã—Ç–∏–µ —Å–æ–±—ã—Ç–∏—è
    event.stopPropagation();
}

// –§—É–Ω–∫—Ü–∏—è —É–¥–∞–ª–µ–Ω–∏—è –∫–Ω–æ–ø–∫–∏ (–ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–∞ –¥–ª—è –∏–∑–±–µ–∂–∞–Ω–∏—è –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤)
function removeSocialInputMain(id) {
    const setting = socialSettings.find(s => s.id === id);
    const name = setting ? setting.name : '–ö–Ω–æ–ø–∫–∞';
    
    socialSettings = socialSettings.filter(setting => setting.id !== id);
    renderSocialInputs();
    
    // –£–±–µ–∂–¥–∞–µ–º—Å—è, —á—Ç–æ –ø–∞–Ω–µ–ª—å –Ω–∞—Å—Ç—Ä–æ–µ–∫ –æ—Å—Ç–∞–µ—Ç—Å—è –æ—Ç–∫—Ä—ã—Ç–æ–π
    const settingsPanel = document.getElementById('settingsPanel');
    settingsPanel.style.display = 'block';
    
    // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ–± —É–¥–∞–ª–µ–Ω–∏–∏ –∏ –ø–æ–¥—Å–∫–∞–∑–∫—É
    showNotification(`üóëÔ∏è ${name} —É–¥–∞–ª–µ–Ω`, 'warning');
    showSettingsHint();
    
    // –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ–º –≤—Å–ø–ª—ã—Ç–∏–µ —Å–æ–±—ã—Ç–∏—è
    event.stopPropagation();
}

// –§—É–Ω–∫—Ü–∏—è –æ—Ç—Ä–∏—Å–æ–≤–∫–∏ –ø–æ–ª–µ–π –≤–≤–æ–¥–∞
function renderSocialInputs() {
    const container = document.getElementById('socialInputs');
    container.innerHTML = '';
    
    socialSettings.forEach((setting, index) => {
        const inputDiv = document.createElement('div');
        inputDiv.className = 'social-input';
        
        // –î–æ–±–∞–≤–ª—è–µ–º –∫–ª–∞—Å—Å –ø–æ–¥—Å–≤–µ—Ç–∫–∏ –¥–ª—è –Ω–æ–≤—ã—Ö –∫–Ω–æ–ø–æ–∫ (–µ—Å–ª–∏ —Å—Å—ã–ª–∫–∞ –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞)
        const baseLinks = [
            'https://t.me/', 'https://wa.me/', 'https://vk.com/', 'https://instagram.com/', 
            'https://facebook.com/', 'https://twitter.com/', 'https://youtube.com/', 
            'https://linkedin.com/in/', 'https://discord.gg/', 'skype:', 'viber://chat?number=', 
            'https://tiktok.com/@', 'https://snapchat.com/add/', 'https://pinterest.com/', 
            'https://reddit.com/r/', 'https://twitch.tv/', 'https://github.com/', 
            'https://steamcommunity.com/id/', 'https://open.spotify.com/user/', 'tel:'
        ];
        
        if (baseLinks.includes(setting.link)) {
            inputDiv.classList.add('newly-added');
        }
        
        inputDiv.innerHTML = `
            <div class="social-input-header">
                <h4 class="social-input-title">${setting.name}</h4>
                <div class="social-input-actions">
                    <button class="move-button move-up" onclick="moveSocialUp(${index})" title="–ü–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å –≤–≤–µ—Ä—Ö" ${index === 0 ? 'disabled' : ''}>‚Üë</button>
                    <button class="move-button move-down" onclick="moveSocialDown(${index})" title="–ü–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å –≤–Ω–∏–∑" ${index === socialSettings.length - 1 ? 'disabled' : ''}>‚Üì</button>
                    <button class="remove-button" onclick="removeSocialInput('${setting.id}')" title="–£–¥–∞–ª–∏—Ç—å">√ó</button>
                </div>
            </div>
            <label>–ù–∞–∑–≤–∞–Ω–∏–µ:</label>
            <input type="text" id="${setting.id}_name" value="${setting.name}" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ –∫–Ω–æ–ø–∫–∏" onchange="updateSetting('${setting.id}', 'name', this.value)">
            <label>–°—Å—ã–ª–∫–∞:</label>
            <input type="text" id="${setting.id}_link" value="${setting.link}" placeholder="https://example.com" onchange="updateSetting('${setting.id}', 'link', this.value)">
            <label>URL –∏–∫–æ–Ω–∫–∏:</label>
            <input type="text" id="${setting.id}_icon" value="${setting.icon}" placeholder="https://example.com/icon.png" onchange="updateSetting('${setting.id}', 'icon', this.value)">
        `;
        
        container.appendChild(inputDiv);
    });
}

// –§—É–Ω–∫—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
function updateSetting(id, field, value) {
    const setting = socialSettings.find(s => s.id === id);
    if (setting) {
        setting[field] = value;
        // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –ø–æ–¥—Å–∫–∞–∑–∫—É –æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –ø—Ä–∏–º–µ–Ω–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
        showSettingsHint();
        
        // –£–±–∏—Ä–∞–µ–º –ø–æ–¥—Å–≤–µ—Ç–∫—É, –µ—Å–ª–∏ —Å—Å—ã–ª–∫–∞ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞
        if (field === 'link' && value && value.trim() !== '' && 
            !value.endsWith('/') && !value.endsWith(':') && !value.endsWith('@')) {
            const inputDiv = document.querySelector(`[id="${id}_link"]`).closest('.social-input');
            if (inputDiv) {
                inputDiv.classList.remove('newly-added');
            }
        }
    }
}

// –§—É–Ω–∫—Ü–∏—è –∑–∞–∫—Ä—ã—Ç–∏—è –ø–∞–Ω–µ–ª–∏ –Ω–∞—Å—Ç—Ä–æ–µ–∫
function closeSettingsPanel() {
    const settingsPanel = document.getElementById('settingsPanel');
    settingsPanel.style.display = 'none';
    // –°–∫—Ä—ã–≤–∞–µ–º –ø–æ–¥—Å–∫–∞–∑–∫—É –ø—Ä–∏ –∑–∞–∫—Ä—ã—Ç–∏–∏ –ø–∞–Ω–µ–ª–∏
    const hint = document.getElementById('settingsHint');
    if (hint) {
        hint.style.display = 'none';
    }
}

// –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–ª—è –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏—è –ø–∞–Ω–µ–ª–∏
let isDragging = false;
let dragOffsetX = 0;
let dragOffsetY = 0;

// –§—É–Ω–∫—Ü–∏—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏—è –ø–∞–Ω–µ–ª–∏
function initPanelDragging() {
    const panel = document.getElementById('settingsPanel');
    const header = document.getElementById('settingsPanelHeader');
    
    if (!panel || !header) return;
    
    header.addEventListener('mousedown', function(e) {
        if (e.target.tagName === 'BUTTON') return; // –ù–µ –Ω–∞—á–∏–Ω–∞–µ–º –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏–µ –ø—Ä–∏ –∫–ª–∏–∫–µ –Ω–∞ –∫–Ω–æ–ø–∫–∏
        
        isDragging = true;
        const rect = panel.getBoundingClientRect();
        dragOffsetX = e.clientX - rect.left;
        dragOffsetY = e.clientY - rect.top;
        
        panel.style.transition = 'none';
        e.preventDefault();
    });
    
    document.addEventListener('mousemove', function(e) {
        if (!isDragging) return;
        
        const newX = e.clientX - dragOffsetX;
        const newY = e.clientY - dragOffsetY;
        
        // –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ–º –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ –≤ –ø—Ä–µ–¥–µ–ª–∞—Ö –æ–∫–Ω–∞
        const maxX = window.innerWidth - panel.offsetWidth;
        const maxY = window.innerHeight - panel.offsetHeight;
        
        panel.style.left = Math.max(0, Math.min(newX, maxX)) + 'px';
        panel.style.top = Math.max(0, Math.min(newY, maxY)) + 'px';
        panel.style.right = 'auto';
    });
    
    document.addEventListener('mouseup', function() {
        if (isDragging) {
            isDragging = false;
            panel.style.transition = 'all 0.3s ease';
        }
    });
}

// –§—É–Ω–∫—Ü–∏—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–∫
function applySettingsMain() {
    console.log('applySettings –≤—ã–∑–≤–∞–Ω–∞');
    
    // –û–±–Ω–æ–≤–ª—è–µ–º –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∏–∑ –ø–æ–ª–µ–π –≤–≤–æ–¥–∞
    socialSettings.forEach(setting => {
        setting.name = document.getElementById(setting.id + '_name').value;
        setting.link = document.getElementById(setting.id + '_link').value;
        setting.icon = document.getElementById(setting.id + '_icon').value;
    });
    
    // –û–±–Ω–æ–≤–ª—è–µ–º –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ Jivo
    jivoSettings.enabled = document.getElementById('jivoEnabled').checked;
    jivoSettings.code = document.getElementById('jivoCode').value;
    jivoSettings.chatMode = document.getElementById('jivoChatMode').checked;
    
    // –û–±–Ω–æ–≤–ª—è–µ–º –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è
    const openMethodClick = document.getElementById('openMethodClick');
    displaySettings.openMethod = openMethodClick.checked ? 'click' : 'always';
    
    const menuOrientationVertical = document.getElementById('menuOrientationVertical');
    displaySettings.menuOrientation = menuOrientationVertical.checked ? 'vertical' : 'horizontal';
    
    // –°–æ—Ö—Ä–∞–Ω—è–µ–º –∫–∞—Å—Ç–æ–º–Ω—ã–µ —Ä–∞–∑–º–µ—Ä—ã –∫–Ω–æ–ø–∫–∏
    if (mainIconSettings.shapeType === 'customSize') {
        mainIconSettings.customWidth = parseInt(document.getElementById('customWidth').value) || 120;
        mainIconSettings.customHeight = parseInt(document.getElementById('customHeight').value) || 60;
        mainIconSettings.customBorderRadius = parseInt(document.getElementById('customBorderRadius').value) || 8;
    }
    
    // –ü—Ä–∏–º–µ–Ω—è–µ–º –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è
    updateMenuDisplay();
    
    // –ü–µ—Ä–µ—Å–æ–∑–¥–∞–µ–º –º–µ–Ω—é (–≤–∫–ª—é—á–∞—è –∫–Ω–æ–ø–∫—É Jivo)
    createSocialMenu();
    
    // –ü—Ä–∏–º–µ–Ω—è–µ–º Jivo —á–∞—Ç
    applyJivoChat();
    
    // –û–±–Ω–æ–≤–ª—è–µ–º –∏–∫–æ–Ω–∫—É –≥–ª–∞–≤–Ω–æ–π –∫–Ω–æ–ø–∫–∏
    updateMainButtonIcon();
    
    // –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º –≥–æ—Ç–æ–≤—ã–π –∫–æ–¥ –¥–ª—è –≤—Å—Ç–∞–≤–∫–∏
    generateReadyCode();
    
    // –ù–ï –∑–∞–∫—Ä—ã–≤–∞–µ–º –ø–∞–Ω–µ–ª—å –Ω–∞—Å—Ç—Ä–æ–µ–∫ - –æ—Å—Ç–∞–≤–ª—è–µ–º –µ—ë –æ—Ç–∫—Ä—ã—Ç–æ–π
    // const settingsPanel = document.getElementById('settingsPanel');
    // settingsPanel.style.display = 'none';
    
    // –°–∫—Ä—ã–≤–∞–µ–º –ø–æ–¥—Å–∫–∞–∑–∫—É
    document.getElementById('settingsHint').style.display = 'none';
    
    // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ–± —É—Å–ø–µ—à–Ω–æ–º –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–∏
    showNotification('‚úÖ –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–∏–º–µ–Ω–µ–Ω—ã! –ì–æ—Ç–æ–≤—ã–π –∫–æ–¥ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω.', 'success');
    
    // –°–∫—Ä–æ–ª–ª–∏–º –∫ –±–ª–æ–∫—É —Å –∫–æ–¥–æ–º –∏ –≤—ã–¥–µ–ª—è–µ–º –µ–≥–æ
    setTimeout(() => {
        const codeOutput = document.getElementById('codeOutput');
        if (codeOutput) {
            codeOutput.scrollIntoView({ behavior: 'smooth', block: 'center' });
            
            // –î–æ–±–∞–≤–ª—è–µ–º –≤–∏–∑—É–∞–ª—å–Ω–æ–µ –≤—ã–¥–µ–ª–µ–Ω–∏–µ –±–ª–æ–∫–∞
            codeOutput.style.border = '3px solid #28a745';
            codeOutput.style.boxShadow = '0 0 20px rgba(40, 167, 69, 0.3)';
            codeOutput.style.transform = 'scale(1.02)';
            codeOutput.style.transition = 'all 0.3s ease';
            
            // –£–±–∏—Ä–∞–µ–º –≤—ã–¥–µ–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ 3 —Å–µ–∫—É–Ω–¥—ã
            setTimeout(() => {
                codeOutput.style.border = '1px solid #dee2e6';
                codeOutput.style.boxShadow = '0 2px 8px rgba(0,0,0,0.05)';
                codeOutput.style.transform = 'scale(1)';
            }, 3000);
        }
        
        // –í—ã–¥–µ–ª—è–µ–º –∫–Ω–æ–ø–∫—É "–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å –≥–æ—Ç–æ–≤—ã–π –∫–æ–¥"
        const copyButton = document.querySelector('.copy-button');
        if (copyButton) {
            copyButton.style.background = '#ffc107';
            copyButton.style.color = '#212529';
            copyButton.style.transform = 'scale(1.1)';
            copyButton.style.boxShadow = '0 4px 15px rgba(255, 193, 7, 0.4)';
            copyButton.style.transition = 'all 0.3s ease';
            
            // –í–æ–∑–≤—Ä–∞—â–∞–µ–º –∫–Ω–æ–ø–∫—É –∫ –∏—Å—Ö–æ–¥–Ω–æ–º—É —Å–æ—Å—Ç–æ—è–Ω–∏—é —á–µ—Ä–µ–∑ 3 —Å–µ–∫—É–Ω–¥—ã
            setTimeout(() => {
                copyButton.style.background = '#28a745';
                copyButton.style.color = 'white';
                copyButton.style.transform = 'scale(1)';
                copyButton.style.boxShadow = '0 2px 4px rgba(0,0,0,0.1)';
            }, 3000);
        }
    }, 500);
}

// –§—É–Ω–∫—Ü–∏—è –æ—Ç–∫—Ä—ã—Ç–∏—è Jivo —á–∞—Ç–∞
function openJivoChat() {
    if (window.jivo_api && typeof window.jivo_api.open === 'function') {
        window.jivo_api.open();
        if (typeof window.jivo_onOpen === 'function') window.jivo_onOpen();
    } else {
        // –ï—Å–ª–∏ API –µ—â–µ –Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω, –ø—Ä–æ–±—É–µ–º —á–µ—Ä–µ–∑ 300–º—Å
        setTimeout(openJivoChat, 300);
    }
}

// –§—É–Ω–∫—Ü–∏—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è Jivo —á–∞—Ç–∞
function applyJivoChat() {
    const container = document.getElementById('jivoContainer');
    container.innerHTML = '';
    
    if (jivoSettings.enabled) {
        // –î–æ–±–∞–≤–ª—è–µ–º CSS –¥–ª—è —Å–∫—Ä—ã—Ç–∏—è —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–π –∫–Ω–æ–ø–∫–∏ Jivo
        const style = document.createElement('style');
        style.textContent = '.jivo-widget-button { display: none !important; }';
        container.appendChild(style);
    }
}

// –§—É–Ω–∫—Ü–∏—è –æ—á–∏—Å—Ç–∫–∏ –≤—Å–µ—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫
function clearAllSettingsMain() {
    if (confirm('–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ –æ—á–∏—Å—Ç–∏—Ç—å –≤—Å–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏?')) {
        socialSettings = [];
        nextId = 1;
        jivoSettings.enabled = false;
        jivoSettings.customIcon = null;
        jivoSettings.code = '';
        jivoSettings.chatMode = false;
        displaySettings.openMethod = 'click';
        displaySettings.menuOrientation = 'vertical';
        mainIconSettings.type = 'default';
        mainIconSettings.customUrl = null;
        mainIconSettings.colorType = 'default';
        mainIconSettings.customColor = '#667eea';
        mainIconSettings.shapeType = 'default';
        mainIconSettings.customWidth = 120;
        mainIconSettings.customHeight = 60;
        mainIconSettings.customBorderRadius = 8;
        
        document.getElementById('jivoEnabled').checked = false;
        document.getElementById('jivoChatMode').checked = false;
        document.getElementById('jivoIconUrl').value = '';
        document.getElementById('jivoIconPreview').style.display = 'none';
        document.getElementById('jivoIconSection').style.display = 'none';
        document.getElementById('jivoCodeSection').style.display = 'none';
        document.getElementById('jivoCode').value = '';
        document.getElementById('openMethodClick').checked = true;
        document.getElementById('menuOrientationVertical').checked = true;
        document.getElementById('defaultIcon').checked = true;
        document.getElementById('mainIconUrl').value = '';
        document.getElementById('mainIconPreview').style.display = 'none';
        document.getElementById('customMainIconSection').style.display = 'none';
        document.getElementById('defaultColor').checked = true;
        document.getElementById('mainColorCode').value = '#667eea';
        document.getElementById('mainColorPicker').value = '#667eea';
        document.getElementById('mainColorPreview').style.display = 'none';
        document.getElementById('customMainColorSection').style.display = 'none';
        document.getElementById('defaultShape').checked = true;
        document.getElementById('customSizeSection').style.display = 'none';
        document.getElementById('customWidth').value = '120';
        document.getElementById('customHeight').value = '60';
        document.getElementById('customBorderRadius').value = '8';
        
        renderSocialInputs();
        createSocialMenu(); // –ü–µ—Ä–µ—Å–æ–∑–¥–∞–µ–º –º–µ–Ω—é –±–µ–∑ –∫–Ω–æ–ø–∫–∏ Jivo
        updateMainButtonIcon(); // –û–±–Ω–æ–≤–ª—è–µ–º –≥–ª–∞–≤–Ω—É—é –∏–∫–æ–Ω–∫—É
        updateMainButtonColor(); // –û–±–Ω–æ–≤–ª—è–µ–º —Ü–≤–µ—Ç –≥–ª–∞–≤–Ω–æ–π –∫–Ω–æ–ø–∫–∏
        updateMainButtonShape(); // –û–±–Ω–æ–≤–ª—è–µ–º —Ñ–æ—Ä–º—É –≥–ª–∞–≤–Ω–æ–π –∫–Ω–æ–ø–∫–∏
        document.getElementById('jivoContainer').innerHTML = '';
        document.getElementById('codeOutput').style.display = 'none';
        
        // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ–± –æ—á–∏—Å—Ç–∫–µ
        showNotification('üßπ –í—Å–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –æ—á–∏—â–µ–Ω—ã', 'info');
    }
}

// –§—É–Ω–∫—Ü–∏—è —Å–æ–∑–¥–∞–Ω–∏—è —Å–æ—Ü–∏–∞–ª—å–Ω–æ–≥–æ –º–µ–Ω—é
function createSocialMenu() {
    const menu = document.getElementById('popupMenu');
    menu.innerHTML = '';
    
    // –í —Ä–µ–∂–∏–º–µ —á–∞—Ç–∞ –Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ–º —Å–æ—Ü—Å–µ—Ç–∏
    if (jivoSettings.chatMode && jivoSettings.enabled) {
        return;
    }
    
    if (window.currentMode === 'jivo') {
        // –†–µ–∂–∏–º Jivo –≤–∏–¥–∂–µ—Ç–æ–≤
        window.jivoWidgets.forEach(widgetId => {
            const name = document.getElementById(`jivo_widget_name_${widgetId}`)?.value;
            const code = document.getElementById(`jivo_widget_code_${widgetId}`)?.value;
            const color = document.getElementById(`jivo_widget_color_${widgetId}`)?.value || '#ffffff';
            
            if (name && name.trim() !== '' && code && code.trim() !== '') {
                const button = document.createElement('button');
                button.className = 'social-button';
                button.title = name;
                button.style.backgroundColor = color;
                button.style.border = '2px solid #e0e0e0';
                button.style.borderRadius = '25px';
                button.style.padding = '8px 16px';
                button.style.minWidth = '80px';
                button.style.height = '50px';
                button.style.display = 'flex';
                button.style.alignItems = 'center';
                button.style.justifyContent = 'center';
                button.style.boxShadow = '0 2px 8px rgba(0,0,0,0.15)';
                button.style.transition = 'all 0.3s ease';
                button.innerHTML = '<span style="font-size: 12px; font-weight: bold; color: #333; text-align: center;">' + name + '</span>';
                
                button.onmouseover = function() {
                    this.style.transform = 'scale(1.05)';
                    this.style.boxShadow = '0 4px 12px rgba(0,0,0,0.2)';
                };
                
                button.onmouseout = function() {
                    this.style.transform = 'scale(1)';
                    this.style.boxShadow = '0 2px 8px rgba(0,0,0,0.15)';
                };
                
                button.onclick = function() {
                    // –ò–∑–≤–ª–µ–∫–∞–µ–º src –∏–∑ –∫–æ–¥–∞ –≤–∏–¥–∂–µ—Ç–∞
                    const srcMatch = code.match(/src="([^"]+)"/);
                    if (srcMatch) {
                        loadJivoScript(srcMatch[1]);
                    } else {
                        alert('–ù–µ–≤–µ—Ä–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –∫–æ–¥–∞ –≤–∏–¥–∂–µ—Ç–∞');
                    }
                };
                
                menu.appendChild(button);
            }
        });
        return;
    }
    
    // –°–æ–∑–¥–∞–µ–º –∫–Ω–æ–ø–∫–∏ –¥–ª—è –∫–∞–∂–¥–æ–π —Å–æ—Ü—Å–µ—Ç–∏
    socialSettings.forEach(setting => {
        if (setting.link && setting.link.trim() !== '') {
            const button = document.createElement('a');
            button.href = setting.link;
            button.className = 'social-button';
            button.target = '_blank';
            button.title = setting.name;
            
            const img = document.createElement('img');
            img.src = setting.icon;
            img.alt = setting.name;
            img.onerror = function() {
                this.src = 'https://cdn-icons-png.flaticon.com/512/1827/1827933.png';
            };
            
            button.appendChild(img);
            menu.appendChild(button);
        }
    });
    
    // –î–æ–±–∞–≤–ª—è–µ–º –∫–Ω–æ–ø–∫—É Jivo —á–∞—Ç–∞, –µ—Å–ª–∏ –æ–Ω –≤–∫–ª—é—á–µ–Ω –∏ –ù–ï –≤ —Ä–µ–∂–∏–º–µ —á–∞—Ç–∞
    if (jivoSettings.enabled && !jivoSettings.chatMode) {
        const jivoButton = document.createElement('button');
        jivoButton.className = 'social-button';
        jivoButton.title = '–ù–∞–ø–∏—Å–∞—Ç—å –≤ —á–∞—Ç';
        jivoButton.onclick = openJivoChat;
        
        if (jivoSettings.customIcon) {
            // –ò—Å–ø–æ–ª—å–∑—É–µ–º –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—É—é –∏–∫–æ–Ω–∫—É
            const img = document.createElement('img');
            img.src = jivoSettings.customIcon;
            img.alt = '–ù–∞–ø–∏—Å–∞—Ç—å –≤ —á–∞—Ç';
            img.style.width = '25px';
            img.style.height = '25px';
            jivoButton.appendChild(img);
        } else {
            // –ò—Å–ø–æ–ª—å–∑—É–µ–º —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—É—é –∏–∫–æ–Ω–∫—É Jivo (svg-silh)
            const img = document.createElement('img');
            img.src = 'https://svgsilh.com/svg/873316-1f7a22.svg';
            img.alt = 'Jivo —á–∞—Ç';
            img.style.width = '25px';
            img.style.height = '25px';
            jivoButton.appendChild(img);
        }
        
        menu.appendChild(jivoButton);
    }
}

// –§—É–Ω–∫—Ü–∏—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –≥–æ—Ç–æ–≤–æ–≥–æ –∫–æ–¥–∞ –¥–ª—è –≤—Å—Ç–∞–≤–∫–∏
function generateReadyCode() {
    let code = '';
    
    // –ü–æ–ª—É—á–∞–µ–º —Ç–µ–∫—É—â–∏–π —Ä–µ–∂–∏–º —Ä–∞–±–æ—Ç—ã
    const currentModeValue = document.querySelector('input[name="mode"]:checked')?.value || 'social';
    
    // –ù–∞—á–∏–Ω–∞–µ–º —Å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è
    code += '<!-- –ú—É–ª—å—Ç–∏-–∫–Ω–æ–ø–∫–∞ —Å —Å–æ—Ü—Å–µ—Ç—è–º–∏ -->\n';
    
    // –î–æ–±–∞–≤–ª—è–µ–º CSS —Å—Ç–∏–ª–∏
    code += '<style>\n';
    code += '.multibutton {\n';
    code += '    position: fixed;\n';
    code += '    bottom: 20px;\n';
    code += '    right: 20px;\n';
    code += '    z-index: 10000;\n';
    code += '}\n\n';
    code += '.main-button {\n';
    
    // –ü—Ä–∏–º–µ–Ω—è–µ–º –∫–∞—Å—Ç–æ–º–Ω—ã–µ —Ä–∞–∑–º–µ—Ä—ã –µ—Å–ª–∏ –æ–Ω–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã
    if (mainIconSettings.shapeType === 'customSize') {
        code += '    width: ' + mainIconSettings.customWidth + 'px;\n';
        code += '    height: ' + mainIconSettings.customHeight + 'px;\n';
        code += '    border-radius: ' + mainIconSettings.customBorderRadius + 'px;\n';
    } else {
        code += '    width: 60px;\n';
        code += '    height: 60px;\n';
        code += '    border-radius: 50%;\n';
    }
    
    if (mainIconSettings.colorType === 'custom') {
        code += '    background: ' + mainIconSettings.customColor + ';\n';
    } else {
        code += '    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n';
    }
    code += '    border: none;\n';
    code += '    cursor: pointer;\n';
    code += '    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);\n';
    code += '    transition: all 0.3s ease;\n';
    code += '    display: flex;\n';
    code += '    align-items: center;\n';
    code += '    justify-content: center;\n';
    code += '    position: relative;\n';
    code += '    overflow: hidden;\n';
    code += '}\n\n';
    code += '.main-button:hover {\n';
    code += '    transform: scale(1.1);\n';
    code += '    box-shadow: 0 6px 20px rgba(102, 126, 234, 0.4);\n';
    code += '}\n\n';
    code += '.main-button img {\n';
    code += '    width: 30px;\n';
    code += '    height: 30px;\n';
    code += '    filter: brightness(0) invert(1);\n';
    code += '}\n\n';
    code += '.main-button .custom-icon {\n';
    if (mainIconSettings.type === 'custom' && mainIconSettings.customUrl) {
        // –î–ª—è –∫–∞—Å—Ç–æ–º–Ω—ã—Ö –∏–∫–æ–Ω–æ–∫
        code += '    width: 100%;\n';
        code += '    height: 100%;\n';
        code += '    object-fit: cover;\n';
        code += '    filter: none;\n';
        code += '    position: absolute;\n';
        code += '    top: 0;\n';
        code += '    left: 0;\n';
        code += '    z-index: 1;\n';
        code += '    padding: 0;\n';
    } else {
        code += '    display: none;\n';
    }
    code += '}\n\n';
    code += '.popup-menu {\n';
    code += '    position: absolute;\n';
    if (displaySettings.menuOrientation === 'horizontal') {
        code += '    flex-direction: row;\n';
    } else {
        code += '    flex-direction: column;\n';
    }
    if (displaySettings.openMethod === 'always') {
        code += '    display: flex;\n';
    } else {
        code += '    display: none;\n';
    }
    code += '    align-items: center;\n';
    code += '    gap: 10px;\n';
    code += '}\n\n';
    code += '.social-button {\n';
    code += '    width: 50px;\n';
    code += '    height: 50px;\n';
    code += '    border-radius: 50%;\n';
    code += '    border: none;\n';
    code += '    background: white;\n';
    code += '    cursor: pointer;\n';
    code += '    display: flex;\n';
    code += '    align-items: center;\n';
    code += '    justify-content: center;\n';
    code += '    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.15);\n';
    code += '    transition: all 0.3s ease;\n';
    code += '    text-decoration: none;\n';
    code += '}\n\n';
    code += '.social-button:hover {\n';
    code += '    transform: scale(1.15);\n';
    code += '}\n\n';
    code += '.social-button img {\n';
    code += '    width: 25px;\n';
    code += '    height: 25px;\n';
    code += '}\n\n';
    code += '.jivo-button {\n';
    code += '    background: white !important;\n';
    code += '}\n\n';
    code += '.jivo-button:hover {\n';
    code += '    background: #f8f9fa !important;\n';
    code += '}\n\n';
    code += '.hidden {\n';
    code += '    display: none !important;\n';
    code += '}\n';
    code += '</style>\n\n';
    // –î–æ–±–∞–≤–ª—è–µ–º HTML —Å—Ç—Ä—É–∫—Ç—É—Ä—É
    code += '<div class="multibutton">\n';
    if (displaySettings.openMethod === 'click') {
        code += '    <button class="main-button">\n';
        // –í —Ä–µ–∂–∏–º–µ —á–∞—Ç–∞ –∏—Å–ø–æ–ª—å–∑—É–µ–º –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≥–ª–∞–≤–Ω–æ–π –∫–Ω–æ–ø–∫–∏
        if (jivoSettings.chatMode && jivoSettings.enabled) {
            if (mainIconSettings.type === 'custom' && mainIconSettings.customUrl) {
                code += '        <img src="' + mainIconSettings.customUrl + '" alt="–ö–∞—Å—Ç–æ–º–Ω–∞—è –∏–∫–æ–Ω–∫–∞" class="custom-icon" />\n';
            } else {
                code += '        <img src="https://cdn-icons-png.flaticon.com/512/1827/1827933.png" alt="–ú–µ–Ω—é" class="default-icon" />\n';
            }
        } else {
            if (mainIconSettings.type === 'custom' && mainIconSettings.customUrl) {
                code += '        <img src="https://cdn-icons-png.flaticon.com/512/1827/1827933.png" alt="–ú–µ–Ω—é" class="default-icon" style="display: none;" />\n';
                code += '        <img src="' + mainIconSettings.customUrl + '" alt="–ö–∞—Å—Ç–æ–º–Ω–∞—è –∏–∫–æ–Ω–∫–∞" class="custom-icon" />\n';
            } else {
                code += '        <img src="https://cdn-icons-png.flaticon.com/512/1827/1827933.png" alt="–ú–µ–Ω—é" class="default-icon" />\n';
                code += '        <img src="" alt="–ö–∞—Å—Ç–æ–º–Ω–∞—è –∏–∫–æ–Ω–∫–∞" class="custom-icon" style="display: none;" />\n';
            }
        }
        code += '    </button>\n';
    }
    // –í —Ä–µ–∂–∏–º–µ —á–∞—Ç–∞ –Ω–µ —Å–æ–∑–¥–∞–µ–º –º–µ–Ω—é —Å —Å–æ—Ü—Å–µ—Ç—è–º–∏
    if (!(jivoSettings.chatMode && jivoSettings.enabled)) {
        code += '    <div class="popup-menu" id="popupMenu">\n';
        
        // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ä–µ–∂–∏–º —Ä–∞–±–æ—Ç—ã
        if (currentModeValue === 'jivo') {
            // –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º –∫–Ω–æ–ø–∫–∏ Jivo –≤–∏–¥–∂–µ—Ç–æ–≤
            window.jivoWidgets.forEach(widgetId => {
                const name = document.getElementById('jivo_widget_name_' + widgetId)?.value;
                const codeValue = document.getElementById('jivo_widget_code_' + widgetId)?.value;
                const color = document.getElementById('jivo_widget_color_' + widgetId)?.value || '#ffffff';
                
                if (name && name.trim() !== '' && codeValue && codeValue.trim() !== '') {
                    // –≠–∫—Ä–∞–Ω–∏—Ä—É–µ–º HTML —Ç–µ–≥–∏ –∏ –∫–∞–≤—ã—á–∫–∏ –≤ –∫–æ–¥–µ –≤–∏–¥–∂–µ—Ç–∞
                    const escapedCode = codeValue.replace(/</g, '&lt;').replace(/>/g, '&gt;').replace(/"/g, '&quot;').replace(/'/g, '&#39;');
                    const escapedName = name.replace(/"/g, '&quot;').replace(/'/g, '&#39;');
                    code += '        <button class="social-button" onclick="loadJivoWidget(\'' + escapedCode + '\', \'' + escapedName + '\')" title="' + escapedName + '" style="background-color: ' + color + '; border: 2px solid #e0e0e0; border-radius: 25px; padding: 8px 16px; min-width: 80px; height: 50px; display: flex; align-items: center; justify-content: center; box-shadow: 0 2px 8px rgba(0,0,0,0.15); transition: all 0.3s ease;">\n';
                    code += '            <span style="font-size: 12px; font-weight: bold; color: #333; text-align: center;">' + escapedName + '</span>\n';
                    code += '        </button>\n';
                }
            });
        } else {
            // –î–æ–±–∞–≤–ª—è–µ–º —Å–æ—Ü–∏–∞–ª—å–Ω—ã–µ –∫–Ω–æ–ø–∫–∏
            socialSettings.forEach(setting => {
                if (setting.link && setting.link.trim() !== '') {
                    code += '        <a href="' + setting.link + '" class="social-button" target="_blank" title="' + setting.name + '">\n';
                    code += '            <img src="' + setting.icon + '" alt="' + setting.name + '" />\n';
                    code += '        </a>\n';
                }
            });
            
            // –î–æ–±–∞–≤–ª—è–µ–º –∫–Ω–æ–ø–∫—É Jivo, –µ—Å–ª–∏ –≤–∫–ª—é—á–µ–Ω –∏ –ù–ï –≤ —Ä–µ–∂–∏–º–µ —á–∞—Ç–∞
            if (jivoSettings.enabled && !jivoSettings.chatMode) {
                code += '        <button class="social-button" onclick="openJivoChat()" title="–ù–∞–ø–∏—Å–∞—Ç—å –≤ —á–∞—Ç">\n';
                if (jivoSettings.customIcon) {
                    code += '            <img src="' + jivoSettings.customIcon + '" alt="–ù–∞–ø–∏—Å–∞—Ç—å –≤ —á–∞—Ç" />\n';
                } else {
                    code += '            <img src="https://svgsilh.com/svg/873316-1f7a22.svg" alt="Jivo —á–∞—Ç" />\n';
                }
                code += '        </button>\n';
            }
        }
        
        code += '    </div>\n';
    }
    code += '</div>\n\n';
    // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –≥–æ—Ç–æ–≤—ã–π –∫–æ–¥
    const codeOutput = document.getElementById('codeOutput');
    const settingsInfo = document.getElementById('settingsInfo');
    // –°–æ–∑–¥–∞–µ–º textarea –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –∫–æ–¥–∞
    if (!document.getElementById('readyCodeTextarea')) {
        const textarea = document.createElement('textarea');
        textarea.id = 'readyCodeTextarea';
        textarea.style.width = '100%';
        textarea.style.height = '400px';
        textarea.style.fontFamily = 'monospace';
        textarea.style.fontSize = '12px';
        textarea.style.padding = '15px';
        textarea.style.border = '1px solid #ddd';
        textarea.style.borderRadius = '5px';
        textarea.style.resize = 'vertical';
        textarea.readOnly = true;
        settingsInfo.appendChild(textarea);
    }
    

    
    // –î–æ–±–∞–≤–ª—è–µ–º –∫–æ–¥ Jivo, –µ—Å–ª–∏ –≤–∫–ª—é—á–µ–Ω
    if (jivoSettings.enabled && jivoSettings.code) {
        code += '\n<!-- –ö–æ–¥ Jivo —á–∞—Ç–∞ -->\n';
        code += jivoSettings.code + '\n';
    }
    
    const jsCode = '\n\n<!-- –î–ª—è —Ä–∞–±–æ—Ç—ã –∫–Ω–æ–ø–∫–∏ –¥–æ–±–∞–≤—å—Ç–µ JavaScript:\n&lt;script&gt;\nfunction toggleMenu() {\n    const menu = document.getElementById("popupMenu");\n    if (menu.style.display === "none" || menu.style.display === "") {\n        menu.style.display = "flex";\n    } else {\n        menu.style.display = "none";\n    }\n}\n\nfunction loadJivoWidget(code, name) {\n    // –î–µ–∫–æ–¥–∏—Ä—É–µ–º HTML entities –æ–±—Ä–∞—Ç–Ω–æ –≤ –æ–±—ã—á–Ω—ã–µ —Å–∏–º–≤–æ–ª—ã\n    const decodedCode = code.replace(/&lt;/g, "<").replace(/&gt;/g, ">").replace(/&quot;/g, '"').replace(/&#39;/g, "'");\n    const srcMatch = decodedCode.match(/src="([^"]+)"/);\n    if (srcMatch) {\n        const script = document.createElement("script");\n        script.src = srcMatch[1];\n        script.async = true;\n        \n        // –î–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –∑–∞–≥—Ä—É–∑–∫–∏ —Å–∫—Ä–∏–ø—Ç–∞\n        script.onload = function() {\n            // –ñ–¥–µ–º –Ω–µ–º–Ω–æ–≥–æ, —á—Ç–æ–±—ã –≤–∏–¥–∂–µ—Ç –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–ª—Å—è\n            setTimeout(() => {\n                if (window.jivo_api && typeof window.jivo_api.open === "function") {\n                    window.jivo_api.open();\n                } else {\n                    // –ï—Å–ª–∏ API –µ—â–µ –Ω–µ –≥–æ—Ç–æ–≤, –∂–¥–µ–º –µ—â–µ –Ω–µ–º–Ω–æ–≥–æ\n                    setTimeout(() => {\n                        if (window.jivo_api && typeof window.jivo_api.open === "function") {\n                            window.jivo_api.open();\n                        }\n                    }, 1000);\n                }\n            }, 300);\n        };\n        \n        document.head.appendChild(script);\n    } else {\n        alert("–ù–µ–≤–µ—Ä–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –∫–æ–¥–∞ –≤–∏–¥–∂–µ—Ç–∞");\n    }\n}\n\nfunction openJivoChat() {\n    if (window.jivo_api && typeof window.jivo_api.open === "function") {\n        window.jivo_api.open();\n    } else {\n        setTimeout(openJivoChat, 300);\n    }\n}\n\n// –°–∫—Ä—ã–≤–∞–µ–º —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—É—é –∫–Ω–æ–ø–∫—É Jivo\nfunction jivo_onLoadCallback() {\n    const jivo_custom_widget = true;\n}\n\n// –°–∫—Ä—ã–≤–∞–µ–º –º—É–ª—å—Ç–∏-–∫–Ω–æ–ø–∫—É –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ —á–∞—Ç–∞\nfunction jivo_onOpen() {\n    const multibutton = document.querySelector(".multibutton");\n    if (multibutton) {\n        multibutton.style.display = "none";\n    }\n}\n\n// –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –º—É–ª—å—Ç–∏-–∫–Ω–æ–ø–∫—É –ø—Ä–∏ –∑–∞–∫—Ä—ã—Ç–∏–∏ —á–∞—Ç–∞\nfunction jivo_onClose() {\n    const multibutton = document.querySelector(".multibutton");\n    if (multibutton) {\n        multibutton.style.display = "block";\n    }\n}\n\ndocument.addEventListener("DOMContentLoaded", function() {\n    const mainButton = document.querySelector(".main-button");\n    if (mainButton) {\n        // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ä–µ–∂–∏–º —á–∞—Ç–∞\n        const isChatMode = ' + (jivoSettings.chatMode && jivoSettings.enabled) + ';\n        const currentMode = "' + currentModeValue + '";\n        if (isChatMode) {\n            mainButton.addEventListener("click", openJivoChat);\n        } else {\n            mainButton.addEventListener("click", toggleMenu);\n        }\n    }\n    \n    // –ü—Ä–∏–º–µ–Ω—è–µ–º –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è\n    const menu = document.getElementById("popupMenu");\n    if (menu) {\n        if ("' + displaySettings.openMethod + '" === "always") {\n            menu.style.display = "flex";\n        } else {\n            menu.style.display = "none";\n        }\n        \n        if ("' + displaySettings.menuOrientation + '" === "horizontal") {\n            menu.style.flexDirection = "row";\n        } else {\n            menu.style.flexDirection = "column";\n        }\n        \n        // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –ø–æ–∑–∏—Ü–∏—é –º–µ–Ω—é —Å —É—á–µ—Ç–æ–º —Ä–∞–∑–º–µ—Ä–∞ –∫–Ω–æ–ø–∫–∏\n        const buttonHeight = mainButton.offsetHeight || 60;\n        const gap = 10;\n        if ("' + displaySettings.menuOrientation + '" === "horizontal") {\n            menu.style.bottom = gap + "px";\n            menu.style.right = (buttonHeight + gap) + "px";\n        } else {\n            menu.style.bottom = (buttonHeight + gap) + "px";\n            menu.style.right = "0";\n        }\n    }\n});\n\ndocument.addEventListener("click", function(event) {\n    const multibutton = document.querySelector(".multibutton");\n    const menu = document.getElementById("popupMenu");\n    if (multibutton && menu && !multibutton.contains(event.target)) {\n        // –°–∫—Ä—ã–≤–∞–µ–º –º–µ–Ω—é —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –Ω–µ –≤—ã–±—Ä–∞–Ω–æ "–≤—Å–µ–≥–¥–∞ –≤–∏–¥–∏–º–æ–µ –º–µ–Ω—é"\n        if ("' + displaySettings.openMethod + '" !== "always") {\n            menu.style.display = "none";\n        }\n    }\n});\n&lt;/script&gt; -->';
    
    document.getElementById('readyCodeTextarea').value = code + jsCode;
    codeOutput.style.display = 'block';
    // –û–±–Ω–æ–≤–ª—è–µ–º –∫–Ω–æ–ø–∫—É –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è
    const copyButton = document.querySelector('.copy-button');
    if (copyButton) {
        copyButton.textContent = 'üìã –ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å –≥–æ—Ç–æ–≤—ã–π –∫–æ–¥';
        copyButton.onclick = copyReadyCode;
    }
}

// –§—É–Ω–∫—Ü–∏—è –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è –≥–æ—Ç–æ–≤–æ–≥–æ –∫–æ–¥–∞
function copyReadyCode() {
    const textarea = document.getElementById('readyCodeTextarea');
    textarea.select();
    document.execCommand('copy');
    
    showNotification("üìã –ì–æ—Ç–æ–≤—ã–π –∫–æ–¥ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω! –í—Å—Ç–∞–≤—å—Ç–µ –µ–≥–æ –ø–µ—Ä–µ–¥ —Ç–µ–≥–æ–º </body>", "success");
    
    const button = event.target;
    const originalText = button.textContent;
    button.textContent = '‚úÖ –°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ!';
    button.style.background = '#28a745';
    
    setTimeout(() => {
        button.textContent = originalText;
        button.style.background = '#28a745';
    }, 2000);
}

// –§—É–Ω–∫—Ü–∏—è –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–∫
function copySettingsMain() {
    console.log('copySettings –≤—ã–∑–≤–∞–Ω–∞');
    
    let settingsText = '';
    
    // –ö–æ–ø–∏—Ä—É–µ–º –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–æ—Ü–∏–∞–ª—å–Ω—ã—Ö –∫–Ω–æ–ø–æ–∫
    settingsText += 'üì± –°–æ—Ü–∏–∞–ª—å–Ω—ã–µ –∫–Ω–æ–ø–∫–∏:\n';
    socialSettings.forEach(setting => {
        if (setting.link && setting.link.trim() !== '') {
            settingsText += `${setting.name}: ${setting.link}\n`;
        }
    });
    
    // –ö–æ–ø–∏—Ä—É–µ–º –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ Jivo
    settingsText += '\nüí¨ Jivo —á–∞—Ç:\n';
    if (jivoSettings.enabled) {
        settingsText += '–í–∫–ª—é—á–µ–Ω\n';
    } else {
        settingsText += '–û—Ç–∫–ª—é—á–µ–Ω\n';
    }
    
    // –°–æ–∑–¥–∞–µ–º –≤—Ä–µ–º–µ–Ω–Ω—ã–π textarea –¥–ª—è –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è
    const textarea = document.createElement('textarea');
    textarea.value = settingsText;
    document.body.appendChild(textarea);
    textarea.select();
    document.execCommand('copy');
    document.body.removeChild(textarea);
    
    // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
    showNotification('üìã –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω—ã –≤ –±—É—Ñ–µ—Ä –æ–±–º–µ–Ω–∞!', 'success');
    
    const button = event.target;
    const originalText = button.textContent;
    button.textContent = '‚úÖ –°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ!';
    button.style.background = '#28a745';
    
    setTimeout(() => {
        button.textContent = originalText;
        button.style.background = '#28a745';
    }, 2000);
}

// –ó–∞–∫—Ä—ã—Ç–∏–µ –º–µ–Ω—é –ø—Ä–∏ –∫–ª–∏–∫–µ –≤–Ω–µ –µ–≥–æ
document.addEventListener('click', function(event) {
    const multibutton = document.querySelector('.multibutton');
    const settingsPanel = document.getElementById('settingsPanel');
    const settingsToggle = document.querySelector('.settings-toggle');
    const socialSelectorModal = document.getElementById('socialSelectorModal');
    
    // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —è–≤–ª—è–µ—Ç—Å—è –ª–∏ –∫–ª–∏–∫ –ø–æ –∫–Ω–æ–ø–∫–µ –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏—è
    if (event.target.classList.contains('move-button') || 
        event.target.closest('.move-button') || 
        event.target.textContent === '‚Üë' || 
        event.target.textContent === '‚Üì') {
        return; // –ù–µ –∑–∞–∫—Ä—ã–≤–∞–µ–º –ø–∞–Ω–µ–ª—å –Ω–∞—Å—Ç—Ä–æ–µ–∫ –ø—Ä–∏ –∫–ª–∏–∫–µ –ø–æ –∫–Ω–æ–ø–∫–∞–º –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏—è
    }
    
    // –ù–µ –∑–∞–∫—Ä—ã–≤–∞–µ–º –ø–∞–Ω–µ–ª—å –Ω–∞—Å—Ç—Ä–æ–µ–∫, –µ—Å–ª–∏ –æ—Ç–∫—Ä—ã—Ç —Å–µ–ª–µ–∫—Ç–æ—Ä —Å–æ—Ü—Å–µ—Ç–µ–π
    if (socialSelectorModal.style.display === 'flex') {
        // –ó–∞–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ –ø—Ä–∏ –∫–ª–∏–∫–µ –≤–Ω–µ –µ–≥–æ
        if (event.target === socialSelectorModal) {
            hideSocialSelector();
        }
        return; // –ù–µ –∑–∞–∫—Ä—ã–≤–∞–µ–º –ø–∞–Ω–µ–ª—å –Ω–∞—Å—Ç—Ä–æ–µ–∫
    }
    
    if (!multibutton.contains(event.target)) {
        // –°–∫—Ä—ã–≤–∞–µ–º –º–µ–Ω—é —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –Ω–µ –≤—ã–±—Ä–∞–Ω–æ "–≤—Å–µ–≥–¥–∞ –≤–∏–¥–∏–º–æ–µ –º–µ–Ω—é"
        if (displaySettings.openMethod !== 'always') {
            document.getElementById('popupMenu').style.display = 'none';
        }
    }
});

// –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
document.addEventListener('DOMContentLoaded', function() {
    console.log('DOM –∑–∞–≥—Ä—É–∂–µ–Ω');
    
    // –°–æ–∑–¥–∞–µ–º –Ω–∞—á–∞–ª—å–Ω–æ–µ –º–µ–Ω—é
    createSocialMenu();
    
    // –ü—Ä–∏–º–µ–Ω—è–µ–º –Ω–∞—á–∞–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è
    updateMenuDisplay();
    
    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Ä–µ–∂–∏–º–∞ —Ä–∞–±–æ—Ç—ã (–ø–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è —ç–ª–µ–º–µ–Ω—Ç–æ–≤)
    setTimeout(() => {
        try {
            console.log('–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Ä–µ–∂–∏–º–∞ —Ä–∞–±–æ—Ç—ã...');
            toggleMode();
            
            // –î–æ–±–∞–≤–ª—è–µ–º –ø—Ä–∏–º–µ—Ä Jivo –≤–∏–¥–∂–µ—Ç–∞ –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ
            if (window.jivoWidgets.length === 0) {
                addJivoWidget();
            }
        } catch (error) {
            console.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ —Ä–µ–∂–∏–º–∞:', error);
        }
    }, 200);
    
    // –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π –≤—ã–∑–æ–≤ —á–µ—Ä–µ–∑ –±–æ–ª—å—à–µ–µ –≤—Ä–µ–º—è –¥–ª—è –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç–∏
    setTimeout(() => {
        console.log('–ü–æ–≤—Ç–æ—Ä–Ω–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Ä–µ–∂–∏–º–∞...');
        toggleMode();
    }, 500);
    
    // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –Ω–∞—á–∞–ª—å–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è Jivo
    // (–∫–æ–¥ Jivo —Ç–µ–ø–µ—Ä—å –≤—Å—Ç–∞–≤–ª—è–µ—Ç—Å—è –∫–ª–∏–µ–Ω—Ç–æ–º –æ—Ç–¥–µ–ª—å–Ω–æ)
});
</script>

</body>
</html> 